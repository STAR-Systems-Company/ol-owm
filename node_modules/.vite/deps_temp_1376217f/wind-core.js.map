{
  "version": 3,
  "sources": ["../../wind-core/src/utils.ts", "../../wind-core/src/Vector.ts", "../../wind-core/src/Field.ts", "../../wind-core/src/index.ts"],
  "sourcesContent": ["import Field from './Field';\nimport type { IField } from './Field';\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst symToStringTag = typeof Symbol !== 'undefined' ? Symbol.toStringTag : undefined;\n\nfunction baseGetTag(value: any) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n  if (!(symToStringTag && symToStringTag in Object(value))) {\n    return toString.call(value);\n  }\n  const isOwn = hasOwnProperty.call(value, symToStringTag);\n  const tag = value[symToStringTag];\n  let unmasked = false;\n  try {\n    value[symToStringTag] = undefined;\n    unmasked = true;\n  } catch (e) {\n    //\n  }\n\n  const result = Object.prototype.toString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport function TypeOf(value: any) {\n  return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\n}\n\n/**\n * 判断是否为函数\n * @param value\n * @returns {boolean}\n */\nexport function isFunction(value: any): value is (...args: any[]) => any {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  if (!isObject(value)) {\n    return false;\n  }\n  const tag = baseGetTag(value);\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object Proxy]'\n  );\n}\n\n/**\n * 判断是否为对象\n * @param value\n * @returns {boolean}\n */\nexport function isObject(value: any) {\n  const type = typeof value;\n  return value !== null && (type === 'object' || type === 'function');\n}\n\n/**\n * is date value\n * @param val\n * @returns {boolean}\n */\nexport function isDate(val: any) {\n  return Object.prototype.toString.call(val) === '[object Date]';\n}\n\n/**\n * is array buffer\n * @param val\n * @returns {boolean}\n */\nexport function isArrayBuffer(val: any) {\n  return Object.prototype.toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * 判断是否为合法字符串\n * @param value\n * @returns {boolean}\n */\nexport function isString(value: any): boolean {\n  if (value == null) {\n    return false;\n  }\n  return typeof value === 'string' || (value.constructor !== null && value.constructor === String);\n}\n\n/**\n * 判断是否为数字\n * @param value\n * @returns {boolean}\n */\nexport function isNumber(value: any) {\n  return Object.prototype.toString.call(value) === '[object Number]' && !isNaN(value);\n}\n\n/**\n * 判断对象是否为空\n * @param object\n * @returns {boolean}\n */\nexport function isEmpty(object: any) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n\n/**\n * 判断是否为 `null`\n * @param obj\n * @returns {boolean}\n */\nexport function isNull(obj: any) {\n  return obj == null;\n}\n\n/**\n * 判断是否是数组\n * @param arr\n */\nexport function isArray(arr: any): boolean {\n  return Array.isArray(arr);\n}\n\n/**\n * assign object\n * @param target\n * @param sources\n */\nexport function assign(target: object, ...sources: any[]) {\n  return Object.assign(target, ...sources);\n}\n\n/**\n * 打印⚠️信息\n * @param msg\n * @param n\n */\nexport function warnLog(msg: string, n?: string) {\n  console.warn(`${n || 'wind-layer'}: ${msg}`);\n}\n\nconst warnings = {};\n\n/**\n * 在程序运行时只打印同类型警告一次\n * @param namespaces\n * @param msg\n */\nexport function warnOnce(namespaces: string, msg: string) {\n  if (!warnings[msg]) {\n    warnLog(msg, namespaces);\n    warnings[msg] = true;\n  }\n}\n\n/**\n * Get floored division\n * @param a\n * @param n\n * @returns {Number} returns remainder of floored division,\n * i.e., floor(a / n). Useful for consistent modulo of negative numbers.\n * See http://en.wikipedia.org/wiki/Modulo_operation.\n */\nexport function floorMod(a: number, n: number) {\n  return a - n * Math.floor(a / n);\n}\n\n/**\n * 检查值是否合法\n * @param val\n * @returns {boolean}\n */\nexport function isValide(val: any) {\n  return val !== undefined && val !== null && !isNaN(val);\n}\n\nexport interface IGFSItem {\n  header: {\n    parameterCategory: number | string;\n    parameterNumber: number | string;\n    dx: number;\n    dy: number;\n    nx: number;\n    ny: number;\n    lo1: number;\n    lo2: number;\n    la1: number;\n    la2: number;\n    [key: string]: any;\n  };\n  data: number[];\n}\n\n/**\n * format gfs json to vector\n * @param data\n * @param options\n */\nexport function formatData(data: IGFSItem[], options: Partial<IField> = {}) {\n  let uComp: IGFSItem = undefined as unknown as IGFSItem;\n  let vComp: IGFSItem = undefined as unknown as IGFSItem;\n\n  if ((process.env.NODE_ENV as string) === ('development' as string)) {\n    console.time('format-data');\n  }\n\n  data.forEach(function (record: IGFSItem) {\n    switch (record.header.parameterCategory + ',' + record.header.parameterNumber) {\n      case '1,2':\n      case '2,2':\n        uComp = record;\n        break;\n      case '1,3':\n      case '2,3':\n        vComp = record;\n        break;\n    }\n  });\n\n  if (!vComp || !uComp) {\n    return undefined;\n  }\n\n  const header = uComp.header;\n  const vectorField = new Field({\n    xmin: header.lo1, // 一般格点数据是按照矩形范围来切割，所以定义其经纬度范围\n    ymin: header.la1,\n    xmax: header.lo2,\n    ymax: header.la2,\n    deltaX: header.dx, // x（经度）增量\n    deltaY: header.dy, // y（维度）增量\n    cols: header.nx, // 列（可由 `(xmax - xmin) / deltaX` 得到）\n    rows: header.ny, // 行\n    us: uComp.data, // U分量\n    vs: vComp.data, // V分量\n    ...options,\n  });\n\n  if ((process.env.NODE_ENV as string) === ('development' as string)) {\n    console.timeEnd('format-data');\n  }\n\n  return vectorField;\n}\n\n/**\n * create canvas\n * @param width\n * @param height\n * @param retina\n * @param Canvas\n * @returns {HTMLCanvasElement}\n */\nexport function createCanvas(width: number, height: number, retina: number, Canvas?: any): HTMLCanvasElement {\n  if (typeof document !== 'undefined') {\n    const canvas = document.createElement('canvas');\n    canvas.width = width * retina;\n    canvas.height = height * retina;\n    return canvas;\n  } else {\n    // create a new canvas instance in node.js\n    // the canvas class needs to have a default constructor without any parameter\n    return new Canvas(width * retina, height * retina);\n  }\n}\n\n/**\n * 移除 dom\n * @param node\n * @returns {removeDomNode}\n */\nexport function removeDomNode(node: HTMLElement | HTMLCanvasElement) {\n  if (!node) {\n    return null;\n  }\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n  return node;\n}\n\nconst keyword = /(\\D+)/;\nconst hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n// eslint-disable-next-line no-useless-escape\nconst rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d.]+)\\s*)?\\)$/;\nconst colorNames: {\n  [key: string]: number[];\n} = {\n  aliceblue: [240, 248, 255],\n  antiquewhite: [250, 235, 215],\n  aqua: [0, 255, 255],\n  aquamarine: [127, 255, 212],\n  azure: [240, 255, 255],\n  beige: [245, 245, 220],\n  bisque: [255, 228, 196],\n  black: [0, 0, 0],\n  blanchedalmond: [255, 235, 205],\n  blue: [0, 0, 255],\n  blueviolet: [138, 43, 226],\n  brown: [165, 42, 42],\n  burlywood: [222, 184, 135],\n  cadetblue: [95, 158, 160],\n  chartreuse: [127, 255, 0],\n  chocolate: [210, 105, 30],\n  coral: [255, 127, 80],\n  cornflowerblue: [100, 149, 237],\n  cornsilk: [255, 248, 220],\n  crimson: [220, 20, 60],\n  cyan: [0, 255, 255],\n  darkblue: [0, 0, 139],\n  darkcyan: [0, 139, 139],\n  darkgoldenrod: [184, 134, 11],\n  darkgray: [169, 169, 169],\n  darkgreen: [0, 100, 0],\n  darkgrey: [169, 169, 169],\n  darkkhaki: [189, 183, 107],\n  darkmagenta: [139, 0, 139],\n  darkolivegreen: [85, 107, 47],\n  darkorange: [255, 140, 0],\n  darkorchid: [153, 50, 204],\n  darkred: [139, 0, 0],\n  darksalmon: [233, 150, 122],\n  darkseagreen: [143, 188, 143],\n  darkslateblue: [72, 61, 139],\n  darkslategray: [47, 79, 79],\n  darkslategrey: [47, 79, 79],\n  darkturquoise: [0, 206, 209],\n  darkviolet: [148, 0, 211],\n  deeppink: [255, 20, 147],\n  deepskyblue: [0, 191, 255],\n  dimgray: [105, 105, 105],\n  dimgrey: [105, 105, 105],\n  dodgerblue: [30, 144, 255],\n  firebrick: [178, 34, 34],\n  floralwhite: [255, 250, 240],\n  forestgreen: [34, 139, 34],\n  fuchsia: [255, 0, 255],\n  gainsboro: [220, 220, 220],\n  ghostwhite: [248, 248, 255],\n  gold: [255, 215, 0],\n  goldenrod: [218, 165, 32],\n  gray: [128, 128, 128],\n  green: [0, 128, 0],\n  greenyellow: [173, 255, 47],\n  grey: [128, 128, 128],\n  honeydew: [240, 255, 240],\n  hotpink: [255, 105, 180],\n  indianred: [205, 92, 92],\n  indigo: [75, 0, 130],\n  ivory: [255, 255, 240],\n  khaki: [240, 230, 140],\n  lavender: [230, 230, 250],\n  lavenderblush: [255, 240, 245],\n  lawngreen: [124, 252, 0],\n  lemonchiffon: [255, 250, 205],\n  lightblue: [173, 216, 230],\n  lightcoral: [240, 128, 128],\n  lightcyan: [224, 255, 255],\n  lightgoldenrodyellow: [250, 250, 210],\n  lightgray: [211, 211, 211],\n  lightgreen: [144, 238, 144],\n  lightgrey: [211, 211, 211],\n  lightpink: [255, 182, 193],\n  lightsalmon: [255, 160, 122],\n  lightseagreen: [32, 178, 170],\n  lightskyblue: [135, 206, 250],\n  lightslategray: [119, 136, 153],\n  lightslategrey: [119, 136, 153],\n  lightsteelblue: [176, 196, 222],\n  lightyellow: [255, 255, 224],\n  lime: [0, 255, 0],\n  limegreen: [50, 205, 50],\n  linen: [250, 240, 230],\n  magenta: [255, 0, 255],\n  maroon: [128, 0, 0],\n  mediumaquamarine: [102, 205, 170],\n  mediumblue: [0, 0, 205],\n  mediumorchid: [186, 85, 211],\n  mediumpurple: [147, 112, 219],\n  mediumseagreen: [60, 179, 113],\n  mediumslateblue: [123, 104, 238],\n  mediumspringgreen: [0, 250, 154],\n  mediumturquoise: [72, 209, 204],\n  mediumvioletred: [199, 21, 133],\n  midnightblue: [25, 25, 112],\n  mintcream: [245, 255, 250],\n  mistyrose: [255, 228, 225],\n  moccasin: [255, 228, 181],\n  navajowhite: [255, 222, 173],\n  navy: [0, 0, 128],\n  oldlace: [253, 245, 230],\n  olive: [128, 128, 0],\n  olivedrab: [107, 142, 35],\n  orange: [255, 165, 0],\n  orangered: [255, 69, 0],\n  orchid: [218, 112, 214],\n  palegoldenrod: [238, 232, 170],\n  palegreen: [152, 251, 152],\n  paleturquoise: [175, 238, 238],\n  palevioletred: [219, 112, 147],\n  papayawhip: [255, 239, 213],\n  peachpuff: [255, 218, 185],\n  peru: [205, 133, 63],\n  pink: [255, 192, 203],\n  plum: [221, 160, 221],\n  powderblue: [176, 224, 230],\n  purple: [128, 0, 128],\n  rebeccapurple: [102, 51, 153],\n  red: [255, 0, 0],\n  rosybrown: [188, 143, 143],\n  royalblue: [65, 105, 225],\n  saddlebrown: [139, 69, 19],\n  salmon: [250, 128, 114],\n  sandybrown: [244, 164, 96],\n  seagreen: [46, 139, 87],\n  seashell: [255, 245, 238],\n  sienna: [160, 82, 45],\n  silver: [192, 192, 192],\n  skyblue: [135, 206, 235],\n  slateblue: [106, 90, 205],\n  slategray: [112, 128, 144],\n  slategrey: [112, 128, 144],\n  snow: [255, 250, 250],\n  springgreen: [0, 255, 127],\n  steelblue: [70, 130, 180],\n  tan: [210, 180, 140],\n  teal: [0, 128, 128],\n  thistle: [216, 191, 216],\n  tomato: [255, 99, 71],\n  turquoise: [64, 224, 208],\n  violet: [238, 130, 238],\n  wheat: [245, 222, 179],\n  white: [255, 255, 255],\n  whitesmoke: [245, 245, 245],\n  yellow: [255, 255, 0],\n  yellowgreen: [154, 205, 50],\n};\n\nexport function getColor(string: string) {\n  let rgb: any[] = [];\n\n  if (string.match(hex)) {\n    let match = string.match(hex);\n\n    if (match !== null) {\n      // @ts-ignore\n      match = match[1];\n\n      for (let i = 0; i < 3; i++) {\n        // https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n        const i2 = i * 2;\n        // @ts-ignore\n        rgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n      }\n\n      rgb[3] = 1;\n    }\n  } else if (string.match(rgba)) {\n    const match = string.match(rgba);\n    for (let i = 0; i < 3; i++) {\n      // @ts-ignore\n      rgb[i] = parseInt(match[i + 1], 0);\n    }\n\n    // @ts-ignore\n    if (match[4]) {\n      // @ts-ignore\n      rgb[3] = parseFloat(match[4]);\n    } else {\n      rgb[3] = 1;\n    }\n  } else if (string.match(keyword)) {\n    const match = string.match(keyword);\n    // @ts-ignore\n    if (match[1] === 'transparent') {\n      return [0, 0, 0, 0];\n    }\n    // @ts-ignore\n    rgb = colorNames[match[1]];\n    if (!rgb) {\n      return null;\n    }\n    rgb[3] = 1;\n    return rgb;\n  } else {\n    return null;\n  }\n\n  return rgb;\n}\n\nexport function compareVersion(v1, v2) {\n  // eslint-disable-next-line no-param-reassign\n  v1 = v1.split('.');\n  // eslint-disable-next-line no-param-reassign\n  v2 = v2.split('.');\n  const len = Math.max(v1.length, v2.length);\n\n  while (v1.length < len) {\n    v1.push('0');\n  }\n  while (v2.length < len) {\n    v2.push('0');\n  }\n\n  for (let i = 0; i < len; i++) {\n    const num1 = parseInt(v1[i]);\n    const num2 = parseInt(v2[i]);\n\n    if (num1 > num2) {\n      return 1;\n    } else if (num1 < num2) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n", "export default class Vector {\n  public u: number;\n  public v: number;\n  public m: number;\n\n  constructor(u: number, v: number) {\n    this.u = u;\n    this.v = v;\n\n    this.m = this.magnitude();\n  }\n\n  /**\n   * 向量值（这里指风速）\n   * @returns {Number}\n   */\n  public magnitude() {\n    return Math.sqrt(this.u ** 2 + this.v ** 2);\n  }\n\n  /**\n   * 流体方向 （这里指风向，范围为0-360º）\n   * N is 0º and E is 90º\n   * @returns {Number}\n   */\n  public directionTo() {\n    const verticalAngle = Math.atan2(this.u, this.v);\n    let inDegrees = verticalAngle * (180.0 / Math.PI);\n    if (inDegrees < 0) {\n      inDegrees += 360.0;\n    }\n    return inDegrees;\n  }\n\n  /**\n   * Angle in degrees (0 to 360º) From x-->\n   * N is 0º and E is 90º\n   * @returns {Number}\n   */\n  public directionFrom() {\n    const a = this.directionTo();\n    return (a + 180.0) % 360.0;\n  }\n}\n", "import { floorMod, warnOnce } from './utils';\nimport Vector from './Vector';\n\nexport interface IField {\n  /* 一般格点数据是按照矩形范围来切割，所以定义其经纬度范围 */\n\n  /**\n   * 经度最小值\n   */\n  xmin: number;\n\n  /**\n   * 纬度最小值\n   */\n  ymin: number;\n\n  /**\n   * 经度最大值\n   */\n  xmax: number;\n\n  /**\n   * 纬度最大值\n   */\n  ymax: number;\n\n  /**\n   * x（经度）增量\n   */\n  deltaX: number;\n\n  /**\n   * y（纬度）增量 (默认我们采用的数据和格点原始数据方向保持一致，数据从左上到右下) 但是需要注意的是此时 deltaY为 -(ymax-ymin) / rows\n   */\n  deltaY: number;\n\n  /**\n   * 列（可由 `(xmax - xmin) / deltaX` 得到）\n   */\n  cols: number;\n\n  /**\n   * 行\n   */\n  rows: number;\n\n  /**\n   * U分量\n   */\n  us: number[];\n\n  /**\n   * V分量\n   */\n  vs: number[];\n\n  /**\n   * 因为grib2json的问题，我们需要翻转 Y 轴数据\n   */\n  flipY?: boolean;\n\n  /**\n   * 是否实现跨世界渲染\n   */\n  wrapX?: boolean;\n\n  /**\n   * 当数据范围时按照 [0, 360] 时需要对x方向进行切割转换为 [-180, 180]，即将废弃\n   */\n  wrappedX?: boolean;\n\n  /**\n   * 当数据范围时按照 [0, 360] 时需要对x方向进行切割转换为 [-180, 180]\n   */\n  translateX?: boolean;\n}\n\nexport interface IPosition {\n  age?: number;\n  x?: number;\n  y?: number;\n  xt?: number;\n  yt?: number;\n  m?: number;\n}\n\nexport default class Field {\n  private readonly xmin: number;\n  private readonly xmax: number;\n  private readonly ymin: number;\n  private readonly ymax: number;\n  private readonly cols: number;\n  private readonly rows: number;\n  private readonly us: number[];\n  private readonly vs: number[];\n  private readonly isContinuous: boolean;\n  private readonly deltaY: number;\n  private readonly deltaX: number;\n  private readonly translateX: undefined | boolean;\n  private readonly isFields: boolean;\n  private readonly flipY: boolean;\n  public grid: (Vector | null)[][];\n  public range: (number | undefined)[] | undefined;\n  private wrapX: boolean;\n\n  constructor(params: IField) {\n    this.grid = [];\n\n    this.xmin = params.xmin;\n    this.xmax = params.xmax;\n\n    this.ymin = params.ymin;\n    this.ymax = params.ymax;\n\n    this.cols = params.cols; // 列数\n    this.rows = params.rows; // 行数\n\n    this.us = params.us; //\n    this.vs = params.vs;\n\n    this.deltaX = params.deltaX; // x 方向增量\n    this.deltaY = params.deltaY; // y方向增量\n    this.flipY = Boolean(params.flipY);\n\n    // 由于数据组织方式和deltaY的默认处理，那么在正常情况下我们需要交换 ymin 和 ymax 得到数据真实的 bbox（todo：我们需要按照真实数据来组织吗？）\n    this.ymin = Math.min(params.ymax, params.ymin);\n    this.ymax = Math.max(params.ymax, params.ymin);\n\n    // 当 deltaY < 0 时，但是数据组织是由左上到右下此时说明数据 Y 轴是反的\n    if (!(this.deltaY < 0 && this.ymin < this.ymax)) {\n      if (params.flipY === undefined) {\n        this.flipY = true;\n      }\n      console.warn('[wind-core]: The data is flipY');\n    }\n\n    /**\n     *\n     */\n    this.isFields = true;\n\n    const cols = Math.ceil((this.xmax - this.xmin) / params.deltaX); // 列\n    const rows = Math.ceil((this.ymax - this.ymin) / params.deltaY); // 行\n\n    if (cols !== this.cols || rows !== this.rows) {\n      console.warn('[wind-core]: The data grid not equal');\n    }\n\n    // 部分数据可能并不是连续的，其经度范围可能是 -180 - 179.5（比如 GFS 0.5 分辨率的）我们需要补齐最后一位\n    this.isContinuous = Math.floor(this.cols * params.deltaX) >= 360;\n    this.translateX = 'translateX' in params ? params.translateX : this.xmax > 180; // [0, 360] --> [-180, 180];\n    if ('wrappedX' in params) {\n      warnOnce('[wind-core]: ', '`wrappedX` namespace will deprecated please use `translateX` instead！');\n    }\n\n    this.wrapX = Boolean(params.wrapX);\n\n    this.grid = this.buildGrid();\n    this.range = this.calculateRange();\n  }\n\n  // from https://github.com/sakitam-fdd/wind-layer/blob/95368f9433/src/windy/windy.js#L110\n  public buildGrid(): (Vector | null)[][] {\n    const grid: any[] = [];\n    let p = 0;\n\n    const { rows, cols, us, vs } = this;\n\n    for (let j = 0; j < rows; j++) {\n      const row: any[] = [];\n      for (let i = 0; i < cols; i++, p++) {\n        const u = us[p];\n        const v = vs[p];\n        const valid = this.isValid(u) && this.isValid(v);\n        row[i] = valid ? new Vector(u, v) : null;\n      }\n\n      if (this.isContinuous) {\n        row.push(row[0]);\n      }\n\n      grid[j] = row;\n    }\n    return grid;\n  }\n\n  /**\n   * release data\n   */\n  public release() {\n    this.grid = [];\n  }\n\n  /**\n   * grib data extent\n   * 格点数据范围\n   */\n  public extent() {\n    return [this.xmin, this.ymin, this.xmax, this.ymax];\n  }\n\n  /**\n   * Bilinear interpolation for Vector\n   * 针对向量进行双线性插值\n   * https://en.wikipedia.org/wiki/Bilinear_interpolation\n   * @param   {Number} x\n   * @param   {Number} y\n   * @param   {Number[]} g00\n   * @param   {Number[]} g10\n   * @param   {Number[]} g01\n   * @param   {Number[]} g11\n   * @returns {Vector}\n   */\n  private bilinearInterpolateVector(\n    x: number,\n    y: number,\n    g00: { u: number; v: number },\n    g10: { u: number; v: number },\n    g01: { u: number; v: number },\n    g11: { u: number; v: number },\n  ) {\n    const rx = 1 - x;\n    const ry = 1 - y;\n\n    const a = rx * ry;\n    const b = x * ry;\n    const c = rx * y;\n    const d = x * y;\n    const u = g00.u * a + g10.u * b + g01.u * c + g11.u * d;\n    const v = g00.v * a + g10.v * b + g01.v * c + g11.v * d;\n    return new Vector(u, v);\n  }\n\n  /**\n   * calculate vector value range\n   */\n  calculateRange() {\n    if (!this.grid || !this.grid[0]) return;\n    const rows = this.grid.length as number;\n    const cols = this.grid[0].length as number;\n\n    // const vectors = [];\n    let min;\n    let max;\n    // @from: https://stackoverflow.com/questions/13544476/how-to-find-max-and-min-in-array-using-minimum-comparisons\n    for (let j = 0; j < rows; j++) {\n      for (let i = 0; i < cols; i++) {\n        const vec = this.grid[j][i];\n\n        if (vec !== null) {\n          const val = vec.m || vec.magnitude();\n          // vectors.push();\n          if (min === undefined) {\n            min = val;\n          } else if (max === undefined) {\n            max = val;\n            // update min max\n            // 1. Pick 2 elements(a, b), compare them. (say a > b)\n            min = Math.min(min, max);\n            max = Math.max(min, max);\n          } else {\n            // 2. Update min by comparing (min, b)\n            // 3. Update max by comparing (max, a)\n            min = Math.min(val, min);\n            max = Math.max(val, max);\n          }\n        }\n      }\n    }\n    return [min, max];\n  }\n\n  /**\n   * 检查 uv是否合法\n   * @param x\n   * @private\n   */\n  public isValid(x: any) {\n    return x !== null && x !== undefined;\n  }\n\n  private getWrappedLongitudes() {\n    let xmin = this.xmin;\n    let xmax = this.xmax;\n\n    if (this.translateX) {\n      if (this.isContinuous) {\n        xmin = -180;\n        xmax = 180;\n      } else {\n        // not sure about this (just one particular case, but others...?)\n        xmax = this.xmax - 360;\n        xmin = this.xmin - 360;\n      }\n    }\n    return [xmin, xmax];\n  }\n\n  public contains(lon: number, lat: number) {\n    const [xmin, xmax] = this.getWrappedLongitudes();\n\n    if (xmax > 180 && lon >= -180 && lon <= xmax - 360) {\n      lon += 360;\n    } else if (xmin < -180 && lon <= 180 && lon >= xmin + 360) {\n      lon -= 360;\n    }\n\n    const longitudeIn = lon >= xmin && lon <= xmax;\n    let latitudeIn;\n    if (this.deltaY >= 0) {\n      latitudeIn = lat >= this.ymin && lat <= this.ymax;\n    } else {\n      latitudeIn = lat >= this.ymax && lat <= this.ymin;\n    }\n    return longitudeIn && latitudeIn;\n  }\n\n  /**\n   * 获取经纬度所在的位置索引\n   * @param lon\n   * @param lat\n   */\n  public getDecimalIndexes(lon: number, lat: number) {\n    const i = floorMod(lon - this.xmin, 360) / this.deltaX; // calculate longitude index in wrapped range [0, 360)\n    if (this.flipY) {\n      const j = (this.ymax - lat) / this.deltaY; // calculate latitude index in direction +90 to -90\n      return [i, j];\n    } else {\n      const j = (this.ymin + lat) / this.deltaY; // calculate latitude index in direction +90 to -90\n      return [i, j];\n    }\n  }\n\n  /**\n   * Nearest value at lon-lat coordinates\n   * 线性插值\n   * @param lon\n   * @param lat\n   */\n  public valueAt(lon: number, lat: number) {\n    let flag = false;\n\n    if (this.wrapX) {\n      flag = true;\n    } else if (this.contains(lon, lat)) {\n      flag = true;\n    }\n\n    if (!flag) return null;\n\n    const indexes = this.getDecimalIndexes(lon, lat);\n    const ii = Math.floor(indexes[0]);\n    const jj = Math.floor(indexes[1]);\n\n    const ci = this.clampColumnIndex(ii);\n    const cj = this.clampRowIndex(jj);\n\n    return this.valueAtIndexes(ci, cj);\n  }\n\n  /**\n   * Get interpolated grid value lon-lat coordinates\n   * 双线性插值\n   * @param lon\n   * @param lat\n   */\n  public interpolatedValueAt(lon: number, lat: number) {\n    let flag = false;\n\n    if (this.wrapX) {\n      flag = true;\n    } else if (this.contains(lon, lat)) {\n      flag = true;\n    }\n\n    if (!flag) return null;\n\n    const [i, j] = this.getDecimalIndexes(lon, lat);\n    return this.interpolatePoint(i, j);\n  }\n\n  public hasValueAt(lon: number, lat: number) {\n    const value = this.valueAt(lon, lat);\n    return value !== null;\n  }\n\n  /**\n   * 基于向量的双线性插值\n   * @param i\n   * @param j\n   */\n  private interpolatePoint(i: number, j: number) {\n    //         1      2           After converting λ and φ to fractional grid indexes i and j, we find the\n    //        fi  i   ci          four points 'G' that enclose point (i, j). These points are at the four\n    //         | =1.4 |           corners specified by the floor and ceiling of i and j. For example, given\n    //      ---G--|---G--- fj 8   i = 1.4 and j = 8.3, the four surrounding grid points are (1, 8), (2, 8),\n    //    j ___|_ .   |           (1, 9) and (2, 9).\n    //  =8.3   |      |\n    //      ---G------G--- cj 9   Note that for wrapped grids, the first column is duplicated as the last\n    //         |      |           column, so the index ci can be used without taking a modulo.\n    const indexes = this.getFourSurroundingIndexes(i, j);\n    const [fi, ci, fj, cj] = indexes;\n    const values = this.getFourSurroundingValues(fi, ci, fj, cj);\n    if (values) {\n      const [g00, g10, g01, g11] = values;\n      // @ts-ignore\n      return this.bilinearInterpolateVector(i - fi, j - fj, g00, g10, g01, g11);\n    }\n\n    return null;\n  }\n\n  /**\n   * Check the column index is inside the field,\n   * adjusting to min or max when needed\n   * @private\n   * @param   {Number} ii - index\n   * @returns {Number} i - inside the allowed indexes\n   */\n  private clampColumnIndex(ii: number) {\n    let i = ii;\n    if (ii < 0) {\n      i = 0;\n    }\n    const maxCol = this.cols - 1;\n    if (ii > maxCol) {\n      i = maxCol;\n    }\n    return i;\n  }\n\n  /**\n   * Check the row index is inside the field,\n   * adjusting to min or max when needed\n   * @private\n   * @param   {Number} jj index\n   * @returns {Number} j - inside the allowed indexes\n   */\n  private clampRowIndex(jj: number) {\n    let j = jj;\n    if (jj < 0) {\n      j = 0;\n    }\n    const maxRow = this.rows - 1;\n    if (jj > maxRow) {\n      j = maxRow;\n    }\n    return j;\n  }\n\n  /**\n   * 计算索引位置周围的数据\n   * @private\n   * @param   {Number} i - decimal index\n   * @param   {Number} j - decimal index\n   * @returns {Array} [fi, ci, fj, cj]\n   */\n  private getFourSurroundingIndexes(i: number, j: number) {\n    const fi = Math.floor(i); // 左\n    let ci = fi + 1; // 右\n    // duplicate colum to simplify interpolation logic (wrapped value)\n    if (this.isContinuous && ci >= this.cols) {\n      ci = 0;\n    }\n    ci = this.clampColumnIndex(ci);\n\n    const fj = this.clampRowIndex(Math.floor(j)); // 上 纬度方向索引（取整）\n    const cj = this.clampRowIndex(fj + 1); // 下\n\n    return [fi, ci, fj, cj];\n  }\n\n  /**\n   * Get four surrounding values or null if not available,\n   * from 4 integer indexes\n   * @private\n   * @param   {Number} fi\n   * @param   {Number} ci\n   * @param   {Number} fj\n   * @param   {Number} cj\n   * @returns {Array}\n   */\n  private getFourSurroundingValues(fi: number, ci: number, fj: number, cj: number) {\n    let row;\n    if ((row = this.grid[fj])) {\n      const g00 = row[fi]; // << left\n      const g10 = row[ci]; // right >>\n      if (this.isValid(g00) && this.isValid(g10) && (row = this.grid[cj])) {\n        // lower row vv\n        const g01 = row[fi]; // << left\n        const g11 = row[ci]; // right >>\n        if (this.isValid(g01) && this.isValid(g11)) {\n          return [g00, g10, g01, g11]; // 4 values found!\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Value for grid indexes\n   * @param   {Number} i - column index (integer)\n   * @param   {Number} j - row index (integer)\n   * @returns {Vector|Number}\n   */\n  public valueAtIndexes(i: number, j: number) {\n    return this.grid[j][i]; // <-- j,i !!\n  }\n\n  /**\n   * Lon-Lat for grid indexes\n   * @param   {Number} i - column index (integer)\n   * @param   {Number} j - row index (integer)\n   * @returns {Number[]} [lon, lat]\n   */\n  public lonLatAtIndexes(i: number, j: number) {\n    const lon = this.longitudeAtX(i);\n    const lat = this.latitudeAtY(j);\n\n    return [lon, lat];\n  }\n\n  /**\n   * Longitude for grid-index\n   * @param   {Number} i - column index (integer)\n   * @returns {Number} longitude at the center of the cell\n   */\n  private longitudeAtX(i: number) {\n    const halfXPixel = this.deltaX / 2.0;\n    let lon = this.xmin + halfXPixel + i * this.deltaX;\n    if (this.translateX) {\n      lon = lon > 180 ? lon - 360 : lon;\n    }\n    return lon;\n  }\n\n  /**\n   * Latitude for grid-index\n   * @param   {Number} j - row index (integer)\n   * @returns {Number} latitude at the center of the cell\n   */\n  private latitudeAtY(j: number) {\n    const halfYPixel = this.deltaY / 2.0;\n    return this.ymax - halfYPixel - j * this.deltaY;\n  }\n\n  /**\n   * 生成粒子位置\n   * @param o\n   * @param width\n   * @param height\n   * @param unproject\n   * @return IPosition\n   */\n  public randomize(\n    o: IPosition = {},\n    width: number,\n    height: number,\n    unproject: (a: number[]) => [number, number] | null,\n  ) {\n    const i = (Math.random() * (width || this.cols)) | 0;\n    const j = (Math.random() * (height || this.rows)) | 0;\n\n    const coords = unproject([i, j]);\n    if (coords !== null) {\n      o.x = coords[0];\n      o.y = coords[1];\n    } else {\n      o.x = this.longitudeAtX(i);\n      o.y = this.latitudeAtY(j);\n    }\n\n    return o;\n  }\n\n  /**\n   * 判断是否是 `Field` 的实例\n   * @return boolean\n   */\n  public checkFields() {\n    return this.isFields;\n  }\n}\n", "import Field from './Field';\nimport type { IField } from './Field';\nimport Vector from './Vector';\nimport { isFunction, isNumber, isString, isValide } from './utils';\n\nexport const defaultOptions = {\n  globalAlpha: 0.9, // 全局透明度\n  lineWidth: 1, // 线条宽度\n  colorScale: '#fff',\n  velocityScale: 1 / 25,\n  // particleAge: 90,\n  maxAge: 90, // alias for particleAge\n  // particleMultiplier: 1 / 300, // TODO: PATHS = Math.round(width * height * particleMultiplier);\n  paths: 800,\n  frameRate: 20,\n  useCoordsDraw: true,\n};\n\ntype emptyFunc = (v?: any) => number;\n\nexport interface IOptions {\n  /**\n   * 全局透明度，主要影响粒子拖尾效果，默认 0.9\n   */\n  globalAlpha: number; // 全局透明度\n\n  /**\n   * 线条宽度\n   */\n  lineWidth: number | emptyFunc;\n\n  /**\n   * 粒子颜色配置, 默认#fff，当为回调函数时，参数 function(m:对应点风速值) => string\n   */\n  colorScale: string | string[] | emptyFunc;\n\n  /**\n   * 对于粒子路径步长的乘积系数，默认 1 / 25\n   */\n  velocityScale: number | emptyFunc;\n\n  /**\n   * 粒子路径能够生成的最大帧数，默认是 90\n   */\n  particleAge?: number; // 粒子在重新生成之前绘制的最大帧数\n\n  /**\n   * 粒子路径能够生成的最大帧数，默认是 90；他代表的是我们的 `paths` 数量的粒子的消亡控制，最小值是 0，最大值是 `maxAge`，在运行到 age 数时会消失然后进行重启\n   */\n  maxAge: number; // alias for particleAge\n\n  /**\n   * 粒子路径数量的系数，不推荐使用（视野宽度 * 高度 * 系数）\n   */\n  particleMultiplier?: number; // TODO: PATHS = Math.round(width * height * that.particleMultiplier);\n\n  /**\n   * 生成的粒子数量\n   */\n  paths: number | emptyFunc;\n\n  /**\n   * 用户自定义的帧率，默认是 20ms, 大概接近 50fps 帧，我们可能在某些场景需要降低帧率一保证渲染稳定性；注意此配置还会影响粒子运动的速度\n   */\n  frameRate: number;\n\n  /**\n   * 用户配置的风速最小值，如果未配置会从传入的数据中计算\n   */\n  minVelocity?: number;\n\n  /**\n   * 用户配置的风速最大值，如果未配置会从传入的数据中计算\n   */\n  maxVelocity?: number;\n\n  /**\n   * 使用外部传入的坐标系统，默认是 `true`；某些场景下我们可能直接使用像素坐标。\n   */\n  useCoordsDraw?: boolean;\n}\n\nfunction indexFor(m: number, min: number, max: number, colorScale: string[]) {\n  // map velocity speed to a style\n  return Math.max(0, Math.min(colorScale.length - 1, Math.round(((m - min) / (max - min)) * (colorScale.length - 1))));\n}\n\nclass WindCore {\n  public static Field = Field;\n\n  public forceStop: boolean;\n  private ctx: CanvasRenderingContext2D;\n  private options: IOptions;\n  private field: Field;\n  private particles: any[] = [];\n  private animationLoop: number;\n  private then: number;\n  private generated = false;\n\n  private starting: boolean;\n\n  constructor(ctx: CanvasRenderingContext2D, options: Partial<IOptions>, field?: Field) {\n    this.ctx = ctx;\n\n    if (!this.ctx) {\n      throw new Error('ctx error');\n    }\n\n    this.animate = this.animate.bind(this);\n\n    this.setOptions(options);\n\n    if (field) {\n      this.updateData(field);\n    }\n  }\n\n  /**\n   * 设置配置项\n   * @param options\n   */\n  public setOptions(options: Partial<IOptions>) {\n    this.options = { ...defaultOptions, ...options };\n\n    const { width, height } = this.ctx.canvas;\n\n    if ('particleAge' in options && !('maxAge' in options) && isNumber(this.options.particleAge)) {\n      // @ts-ignore\n      this.options.maxAge = this.options.particleAge;\n    }\n\n    if ('particleMultiplier' in options && !('paths' in options) && isNumber(this.options.particleMultiplier)) {\n      this.options.paths = Math.round(width * height * (this.options.particleMultiplier as number));\n    }\n\n    this.prerender();\n  }\n\n  /**\n   * 获取配置项\n   */\n  public getOptions() {\n    return this.options;\n  }\n\n  /**\n   * 更新数据\n   * @param field\n   */\n  public updateData(field: Field) {\n    this.field = field;\n    if (!this.generated) {\n      return;\n    }\n    this.particles = this.prepareParticlePaths();\n  }\n\n  // @ts-ignore\n  public project(...args: any[]): [number, number] | null {\n    throw new Error('project must be overriden');\n  }\n\n  // @ts-ignore\n  public unproject(...args: any[]): [number, number] | null {\n    throw new Error('unproject must be overriden');\n  }\n\n  /**\n   * 判断位置是否在当前视窗内\n   * @param coordinates\n   */\n  public intersectsCoordinate(coordinates: [number, number]): boolean {\n    throw new Error('must be overriden');\n  }\n\n  /**\n   * 清空当前画布\n   */\n  public clearCanvas() {\n    this.stop();\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.forceStop = false;\n  }\n\n  isStop() {\n    return !this.starting;\n  }\n\n  /**\n   * 启动粒子动画\n   */\n  public start() {\n    this.starting = true;\n    this.forceStop = false;\n    this.then = Date.now();\n    this.animate();\n  }\n\n  /**\n   * 停止粒子动画\n   */\n  public stop() {\n    cancelAnimationFrame(this.animationLoop);\n    this.starting = false;\n    this.forceStop = true;\n  }\n\n  public animate() {\n    if (this.animationLoop) {\n      cancelAnimationFrame(this.animationLoop);\n    }\n    this.animationLoop = requestAnimationFrame(this.animate);\n    const now = Date.now();\n    const delta = now - this.then;\n    if (delta > this.options.frameRate) {\n      this.then = now - (delta % this.options.frameRate);\n      this.render();\n    }\n  }\n\n  /**\n   * 渲染前处理\n   */\n  public prerender() {\n    this.generated = false;\n    if (!this.field) {\n      return;\n    }\n    this.particles = this.prepareParticlePaths();\n    this.generated = true;\n\n    if (!this.starting && !this.forceStop) {\n      this.starting = true;\n      this.then = Date.now();\n      this.animate();\n    }\n  }\n\n  /**\n   * 开始渲染\n   */\n  public render() {\n    this.moveParticles();\n    this.drawParticles();\n    this.postrender();\n  }\n\n  /**\n   * each frame render end\n   */\n  public postrender() {\n    //\n  }\n\n  private moveParticles() {\n    const { width, height } = this.ctx.canvas;\n    const particles = this.particles;\n    // 清空组\n    const maxAge = this.options.maxAge;\n    const velocityScale = isFunction(this.options.velocityScale)\n      ? this.options.velocityScale()\n      : this.options.velocityScale;\n\n    let i = 0;\n    const len = particles.length;\n    for (; i < len; i++) {\n      const particle = particles[i];\n\n      if (particle.age > maxAge) {\n        particle.age = 0;\n        // restart, on a random x,y\n        this.field.randomize(particle, width, height, this.unproject);\n      }\n\n      const x = particle.x;\n      const y = particle.y;\n\n      const vector = this.field.interpolatedValueAt(x, y);\n\n      if (vector === null) {\n        particle.age = maxAge;\n      } else {\n        const xt = x + vector.u * velocityScale;\n        const yt = y + vector.v * velocityScale;\n\n        if (this.field.hasValueAt(xt, yt)) {\n          // Path from (x,y) to (xt,yt) is visible, so add this particle to the appropriate draw bucket.\n          particle.xt = xt;\n          particle.yt = yt;\n          particle.m = vector.m;\n        } else {\n          // Particle isn't visible, but it still moves through the field.\n          particle.x = xt;\n          particle.y = yt;\n          particle.age = maxAge;\n        }\n      }\n\n      particle.age++;\n    }\n  }\n\n  private fadeIn() {\n    const prev = this.ctx.globalCompositeOperation; // lighter\n    this.ctx.globalCompositeOperation = 'destination-in';\n    this.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.globalCompositeOperation = prev;\n  }\n\n  private drawParticles() {\n    const particles = this.particles;\n    this.fadeIn();\n    this.ctx.globalAlpha = this.options.globalAlpha;\n\n    this.ctx.fillStyle = `rgba(0, 0, 0, ${this.options.globalAlpha})`;\n    this.ctx.lineWidth = (isNumber(this.options.lineWidth) ? this.options.lineWidth : 1) as number;\n    this.ctx.strokeStyle = (isString(this.options.colorScale) ? this.options.colorScale : '#fff') as string;\n\n    let i = 0;\n    const len = particles.length;\n    if (this.field && len > 0) {\n      let min: number;\n      let max: number;\n      // 如果配置了风速范围\n      if (isValide(this.options.minVelocity) && isValide(this.options.maxVelocity)) {\n        min = this.options.minVelocity as number;\n        max = this.options.maxVelocity as number;\n      } else {\n        // 未配置风速范围取格点数据中的最大风速和最小风速\n        [min, max] = this.field.range as [number, number];\n      }\n      for (; i < len; i++) {\n        this[this.options.useCoordsDraw ? 'drawCoordsParticle' : 'drawPixelParticle'](particles[i], min, max);\n      }\n    }\n  }\n\n  /**\n   * 用于绘制像素粒子\n   * @param particle\n   * @param min\n   * @param max\n   */\n  private drawPixelParticle(particle: any, min: number, max: number) {\n    // TODO 需要判断粒子是否超出视野\n    // this.ctx.strokeStyle = color;\n    const pointPrev: [number, number] = [particle.x, particle.y];\n    // when xt isn't exit\n    const pointNext: [number, number] = [particle.xt, particle.yt];\n\n    if (\n      pointNext &&\n      pointPrev &&\n      isValide(pointNext[0]) &&\n      isValide(pointNext[1]) &&\n      isValide(pointPrev[0]) &&\n      isValide(pointPrev[1]) &&\n      particle.age <= this.options.maxAge\n    ) {\n      this.ctx.beginPath();\n      this.ctx.moveTo(pointPrev[0], pointPrev[1]);\n      this.ctx.lineTo(pointNext[0], pointNext[1]);\n\n      if (isFunction(this.options.colorScale)) {\n        // @ts-ignore\n        this.ctx.strokeStyle = this.options.colorScale(particle.m) as string;\n      } else if (Array.isArray(this.options.colorScale)) {\n        const colorIdx = indexFor(particle.m, min, max, this.options.colorScale);\n        this.ctx.strokeStyle = this.options.colorScale[colorIdx];\n      }\n\n      if (isFunction(this.options.lineWidth)) {\n        // @ts-ignore\n        this.ctx.lineWidth = this.options.lineWidth(particle.m) as number;\n      }\n\n      particle.x = particle.xt;\n      particle.y = particle.yt;\n\n      this.ctx.stroke();\n    }\n  }\n\n  /**\n   * 用于绘制坐标粒子\n   * @param particle\n   * @param min\n   * @param max\n   */\n  private drawCoordsParticle(particle: any, min: number, max: number) {\n    // TODO 需要判断粒子是否超出视野\n    // this.ctx.strokeStyle = color;\n    const source: [number, number] = [particle.x, particle.y];\n    // when xt isn't exit\n    const target: [number, number] = [particle.xt, particle.yt];\n\n    if (\n      target &&\n      source &&\n      isValide(target[0]) &&\n      isValide(target[1]) &&\n      isValide(source[0]) &&\n      isValide(source[1]) &&\n      this.intersectsCoordinate(target) &&\n      particle.age <= this.options.maxAge\n    ) {\n      const pointPrev = this.project(source);\n      const pointNext = this.project(target);\n\n      if (pointPrev && pointNext) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(pointPrev[0], pointPrev[1]);\n        this.ctx.lineTo(pointNext[0], pointNext[1]);\n        particle.x = particle.xt;\n        particle.y = particle.yt;\n\n        if (isFunction(this.options.colorScale)) {\n          // @ts-ignore\n          this.ctx.strokeStyle = this.options.colorScale(particle.m) as string;\n        } else if (Array.isArray(this.options.colorScale)) {\n          const colorIdx = indexFor(particle.m, min, max, this.options.colorScale);\n          this.ctx.strokeStyle = this.options.colorScale[colorIdx];\n        }\n\n        if (isFunction(this.options.lineWidth)) {\n          // @ts-ignore\n          this.ctx.lineWidth = this.options.lineWidth(particle.m) as number;\n        }\n\n        this.ctx.stroke();\n      }\n    }\n  }\n\n  private prepareParticlePaths() {\n    // 由用户自行处理，不再自动修改粒子数\n    const { width, height } = this.ctx.canvas;\n    const particleCount = typeof this.options.paths === 'function' ? this.options.paths(this) : this.options.paths;\n    const particles: any[] = [];\n    if (!this.field) {\n      return [];\n    }\n    let i = 0;\n    for (; i < particleCount; i++) {\n      particles.push(\n        this.field.randomize(\n          {\n            age: this.randomize(),\n          },\n          width,\n          height,\n          this.unproject,\n        ),\n      );\n    }\n    return particles;\n  }\n\n  private randomize() {\n    return Math.floor(Math.random() * this.options.maxAge);\n  }\n}\n\nexport * from './utils';\n\nexport { WindCore, Field, Vector, IField };\n"],
  "mappings": ";;;AAGA,IAAM,iBAAiB,OAAO,UAAU;AACxC,IAAM,iBAAiB,OAAO,WAAW,cAAc,OAAO,cAAc;AAE5E,SAAS,WAAW,OAAY;AAC9B,MAAI,UAAU,MAAM;AACX,WAAA,UAAU,SAAY,uBAAuB;EAAA;AAEtD,MAAI,EAAE,kBAAkB,kBAAkB,OAAO,KAAK,IAAI;AACjD,WAAA,SAAS,KAAK,KAAK;EAAA;AAE5B,QAAM,QAAQ,eAAe,KAAK,OAAO,cAAc;AACjD,QAAA,MAAM,MAAM,cAAc;AAChC,MAAI,WAAW;AACX,MAAA;AACF,UAAM,cAAc,IAAI;AACb,eAAA;EAAA,SACJ,GAAG;EAAA;AAIZ,QAAM,SAAS,OAAO,UAAU,SAAS,KAAK,KAAK;AACnD,MAAI,UAAU;AACZ,QAAI,OAAO;AACT,YAAM,cAAc,IAAI;IAAA,OACnB;AACL,aAAO,MAAM,cAAc;IAAA;EAC7B;AAEK,SAAA;AACT;AAEO,SAAS,OAAO,OAAY;AAC1B,SAAA,OAAO,UAAU,SAAS,KAAK,KAAK,EAAE,MAAM,GAAG,EAAE,EAAE,YAAY;AACxE;AAOO,SAAS,WAAW,OAA8C;AAEnE,MAAA,CAAC,SAAS,KAAK,GAAG;AACb,WAAA;EAAA;AAEH,QAAA,MAAM,WAAW,KAAK;AAC5B,SACE,QAAQ,uBACR,QAAQ,4BACR,QAAQ,gCACR,QAAQ;AAEZ;AAOO,SAAS,SAAS,OAAY;AACnC,QAAM,OAAO,OAAO;AACpB,SAAO,UAAU,SAAS,SAAS,YAAY,SAAS;AAC1D;AAOO,SAAS,OAAO,KAAU;AAC/B,SAAO,OAAO,UAAU,SAAS,KAAK,GAAG,MAAM;AACjD;AAOO,SAAS,cAAc,KAAU;AACtC,SAAO,OAAO,UAAU,SAAS,KAAK,GAAG,MAAM;AACjD;AAOO,SAAS,SAAS,OAAqB;AAC5C,MAAI,SAAS,MAAM;AACV,WAAA;EAAA;AAET,SAAO,OAAO,UAAU,YAAa,MAAM,gBAAgB,QAAQ,MAAM,gBAAgB;AAC3F;AAOO,SAAS,SAAS,OAAY;AAC5B,SAAA,OAAO,UAAU,SAAS,KAAK,KAAK,MAAM,qBAAqB,CAAC,MAAM,KAAK;AACpF;AAOO,SAAS,QAAQ,QAAa;AAC/B,MAAA;AACJ,OAAK,YAAY,QAAQ;AAChB,WAAA;EAAA;AAET,SAAO,CAAC;AACV;AAOO,SAAS,OAAO,KAAU;AAC/B,SAAO,OAAO;AAChB;AAMO,SAAS,QAAQ,KAAmB;AAClC,SAAA,MAAM,QAAQ,GAAG;AAC1B;AAOgB,SAAA,OAAO,WAAmB,SAAgB;AACxD,SAAO,OAAO,OAAO,QAAQ,GAAG,OAAO;AACzC;AAOgB,SAAA,QAAQ,KAAa,GAAY;AAC/C,UAAQ,KAAK,GAAG,KAAK,YAAY,KAAK,GAAG,EAAE;AAC7C;AAEA,IAAM,WAAW,CAAA;AAOD,SAAA,SAAS,YAAoB,KAAa;AACpD,MAAA,CAAC,SAAS,GAAG,GAAG;AAClB,YAAQ,KAAK,UAAU;AACvB,aAAS,GAAG,IAAI;EAAA;AAEpB;AAUgB,SAAA,SAAS,GAAW,GAAW;AAC7C,SAAO,IAAI,IAAI,KAAK,MAAM,IAAI,CAAC;AACjC;AAOO,SAAS,SAAS,KAAU;AACjC,SAAO,QAAQ,UAAa,QAAQ,QAAQ,CAAC,MAAM,GAAG;AACxD;AAwBO,SAAS,WAAW,MAAkB,UAA2B,CAAA,GAAI;AAC1E,MAAI,QAAkB;AACtB,MAAI,QAAkB;AAMjB,OAAA,QAAQ,SAAU,QAAkB;AACvC,YAAQ,OAAO,OAAO,oBAAoB,MAAM,OAAO,OAAO,iBAAiB;MAC7E,KAAK;MACL,KAAK;AACK,gBAAA;AACR;MACF,KAAK;MACL,KAAK;AACK,gBAAA;AACR;IAAA;EACJ,CACD;AAEG,MAAA,CAAC,SAAS,CAAC,OAAO;AACb,WAAA;EAAA;AAGT,QAAM,SAAS,MAAM;AACf,QAAA,cAAc,IAAI,MAAM;IAC5B,MAAM,OAAO;;IACb,MAAM,OAAO;IACb,MAAM,OAAO;IACb,MAAM,OAAO;IACb,QAAQ,OAAO;;IACf,QAAQ,OAAO;;IACf,MAAM,OAAO;;IACb,MAAM,OAAO;;IACb,IAAI,MAAM;;IACV,IAAI,MAAM;;IACV,GAAG;EAAA,CACJ;AAMM,SAAA;AACT;AAUO,SAAS,aAAa,OAAe,QAAgB,QAAgB,QAAiC;AACvG,MAAA,OAAO,aAAa,aAAa;AAC7B,UAAA,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,QAAQ,QAAQ;AACvB,WAAO,SAAS,SAAS;AAClB,WAAA;EAAA,OACF;AAGL,WAAO,IAAI,OAAO,QAAQ,QAAQ,SAAS,MAAM;EAAA;AAErD;AAOO,SAAS,cAAc,MAAuC;AACnE,MAAI,CAAC,MAAM;AACF,WAAA;EAAA;AAET,MAAI,KAAK,YAAY;AACd,SAAA,WAAW,YAAY,IAAI;EAAA;AAE3B,SAAA;AACT;AAEA,IAAM,UAAU;AAChB,IAAM,MAAM;AAEZ,IAAM,OAAO;AACb,IAAM,aAEF;EACF,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,cAAc,CAAC,KAAK,KAAK,GAAG;EAC5B,MAAM,CAAC,GAAG,KAAK,GAAG;EAClB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,QAAQ,CAAC,KAAK,KAAK,GAAG;EACtB,OAAO,CAAC,GAAG,GAAG,CAAC;EACf,gBAAgB,CAAC,KAAK,KAAK,GAAG;EAC9B,MAAM,CAAC,GAAG,GAAG,GAAG;EAChB,YAAY,CAAC,KAAK,IAAI,GAAG;EACzB,OAAO,CAAC,KAAK,IAAI,EAAE;EACnB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,WAAW,CAAC,IAAI,KAAK,GAAG;EACxB,YAAY,CAAC,KAAK,KAAK,CAAC;EACxB,WAAW,CAAC,KAAK,KAAK,EAAE;EACxB,OAAO,CAAC,KAAK,KAAK,EAAE;EACpB,gBAAgB,CAAC,KAAK,KAAK,GAAG;EAC9B,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,SAAS,CAAC,KAAK,IAAI,EAAE;EACrB,MAAM,CAAC,GAAG,KAAK,GAAG;EAClB,UAAU,CAAC,GAAG,GAAG,GAAG;EACpB,UAAU,CAAC,GAAG,KAAK,GAAG;EACtB,eAAe,CAAC,KAAK,KAAK,EAAE;EAC5B,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,WAAW,CAAC,GAAG,KAAK,CAAC;EACrB,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,aAAa,CAAC,KAAK,GAAG,GAAG;EACzB,gBAAgB,CAAC,IAAI,KAAK,EAAE;EAC5B,YAAY,CAAC,KAAK,KAAK,CAAC;EACxB,YAAY,CAAC,KAAK,IAAI,GAAG;EACzB,SAAS,CAAC,KAAK,GAAG,CAAC;EACnB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,cAAc,CAAC,KAAK,KAAK,GAAG;EAC5B,eAAe,CAAC,IAAI,IAAI,GAAG;EAC3B,eAAe,CAAC,IAAI,IAAI,EAAE;EAC1B,eAAe,CAAC,IAAI,IAAI,EAAE;EAC1B,eAAe,CAAC,GAAG,KAAK,GAAG;EAC3B,YAAY,CAAC,KAAK,GAAG,GAAG;EACxB,UAAU,CAAC,KAAK,IAAI,GAAG;EACvB,aAAa,CAAC,GAAG,KAAK,GAAG;EACzB,SAAS,CAAC,KAAK,KAAK,GAAG;EACvB,SAAS,CAAC,KAAK,KAAK,GAAG;EACvB,YAAY,CAAC,IAAI,KAAK,GAAG;EACzB,WAAW,CAAC,KAAK,IAAI,EAAE;EACvB,aAAa,CAAC,KAAK,KAAK,GAAG;EAC3B,aAAa,CAAC,IAAI,KAAK,EAAE;EACzB,SAAS,CAAC,KAAK,GAAG,GAAG;EACrB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,MAAM,CAAC,KAAK,KAAK,CAAC;EAClB,WAAW,CAAC,KAAK,KAAK,EAAE;EACxB,MAAM,CAAC,KAAK,KAAK,GAAG;EACpB,OAAO,CAAC,GAAG,KAAK,CAAC;EACjB,aAAa,CAAC,KAAK,KAAK,EAAE;EAC1B,MAAM,CAAC,KAAK,KAAK,GAAG;EACpB,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,SAAS,CAAC,KAAK,KAAK,GAAG;EACvB,WAAW,CAAC,KAAK,IAAI,EAAE;EACvB,QAAQ,CAAC,IAAI,GAAG,GAAG;EACnB,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,eAAe,CAAC,KAAK,KAAK,GAAG;EAC7B,WAAW,CAAC,KAAK,KAAK,CAAC;EACvB,cAAc,CAAC,KAAK,KAAK,GAAG;EAC5B,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,sBAAsB,CAAC,KAAK,KAAK,GAAG;EACpC,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,aAAa,CAAC,KAAK,KAAK,GAAG;EAC3B,eAAe,CAAC,IAAI,KAAK,GAAG;EAC5B,cAAc,CAAC,KAAK,KAAK,GAAG;EAC5B,gBAAgB,CAAC,KAAK,KAAK,GAAG;EAC9B,gBAAgB,CAAC,KAAK,KAAK,GAAG;EAC9B,gBAAgB,CAAC,KAAK,KAAK,GAAG;EAC9B,aAAa,CAAC,KAAK,KAAK,GAAG;EAC3B,MAAM,CAAC,GAAG,KAAK,CAAC;EAChB,WAAW,CAAC,IAAI,KAAK,EAAE;EACvB,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,SAAS,CAAC,KAAK,GAAG,GAAG;EACrB,QAAQ,CAAC,KAAK,GAAG,CAAC;EAClB,kBAAkB,CAAC,KAAK,KAAK,GAAG;EAChC,YAAY,CAAC,GAAG,GAAG,GAAG;EACtB,cAAc,CAAC,KAAK,IAAI,GAAG;EAC3B,cAAc,CAAC,KAAK,KAAK,GAAG;EAC5B,gBAAgB,CAAC,IAAI,KAAK,GAAG;EAC7B,iBAAiB,CAAC,KAAK,KAAK,GAAG;EAC/B,mBAAmB,CAAC,GAAG,KAAK,GAAG;EAC/B,iBAAiB,CAAC,IAAI,KAAK,GAAG;EAC9B,iBAAiB,CAAC,KAAK,IAAI,GAAG;EAC9B,cAAc,CAAC,IAAI,IAAI,GAAG;EAC1B,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,aAAa,CAAC,KAAK,KAAK,GAAG;EAC3B,MAAM,CAAC,GAAG,GAAG,GAAG;EAChB,SAAS,CAAC,KAAK,KAAK,GAAG;EACvB,OAAO,CAAC,KAAK,KAAK,CAAC;EACnB,WAAW,CAAC,KAAK,KAAK,EAAE;EACxB,QAAQ,CAAC,KAAK,KAAK,CAAC;EACpB,WAAW,CAAC,KAAK,IAAI,CAAC;EACtB,QAAQ,CAAC,KAAK,KAAK,GAAG;EACtB,eAAe,CAAC,KAAK,KAAK,GAAG;EAC7B,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,eAAe,CAAC,KAAK,KAAK,GAAG;EAC7B,eAAe,CAAC,KAAK,KAAK,GAAG;EAC7B,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,MAAM,CAAC,KAAK,KAAK,EAAE;EACnB,MAAM,CAAC,KAAK,KAAK,GAAG;EACpB,MAAM,CAAC,KAAK,KAAK,GAAG;EACpB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,QAAQ,CAAC,KAAK,GAAG,GAAG;EACpB,eAAe,CAAC,KAAK,IAAI,GAAG;EAC5B,KAAK,CAAC,KAAK,GAAG,CAAC;EACf,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,WAAW,CAAC,IAAI,KAAK,GAAG;EACxB,aAAa,CAAC,KAAK,IAAI,EAAE;EACzB,QAAQ,CAAC,KAAK,KAAK,GAAG;EACtB,YAAY,CAAC,KAAK,KAAK,EAAE;EACzB,UAAU,CAAC,IAAI,KAAK,EAAE;EACtB,UAAU,CAAC,KAAK,KAAK,GAAG;EACxB,QAAQ,CAAC,KAAK,IAAI,EAAE;EACpB,QAAQ,CAAC,KAAK,KAAK,GAAG;EACtB,SAAS,CAAC,KAAK,KAAK,GAAG;EACvB,WAAW,CAAC,KAAK,IAAI,GAAG;EACxB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,WAAW,CAAC,KAAK,KAAK,GAAG;EACzB,MAAM,CAAC,KAAK,KAAK,GAAG;EACpB,aAAa,CAAC,GAAG,KAAK,GAAG;EACzB,WAAW,CAAC,IAAI,KAAK,GAAG;EACxB,KAAK,CAAC,KAAK,KAAK,GAAG;EACnB,MAAM,CAAC,GAAG,KAAK,GAAG;EAClB,SAAS,CAAC,KAAK,KAAK,GAAG;EACvB,QAAQ,CAAC,KAAK,IAAI,EAAE;EACpB,WAAW,CAAC,IAAI,KAAK,GAAG;EACxB,QAAQ,CAAC,KAAK,KAAK,GAAG;EACtB,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,OAAO,CAAC,KAAK,KAAK,GAAG;EACrB,YAAY,CAAC,KAAK,KAAK,GAAG;EAC1B,QAAQ,CAAC,KAAK,KAAK,CAAC;EACpB,aAAa,CAAC,KAAK,KAAK,EAAE;AAC5B;AAEO,SAAS,SAAS,QAAgB;AACvC,MAAI,MAAa,CAAA;AAEb,MAAA,OAAO,MAAM,GAAG,GAAG;AACjB,QAAA,QAAQ,OAAO,MAAM,GAAG;AAE5B,QAAI,UAAU,MAAM;AAElB,cAAQ,MAAM,CAAC;AAEf,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAE1B,cAAM,KAAK,IAAI;AAEX,YAAA,CAAC,IAAI,SAAS,MAAM,MAAM,IAAI,KAAK,CAAC,GAAG,EAAE;MAAA;AAG/C,UAAI,CAAC,IAAI;IAAA;EACX,WACS,OAAO,MAAM,IAAI,GAAG;AACvB,UAAA,QAAQ,OAAO,MAAM,IAAI;AAC/B,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAE1B,UAAI,CAAC,IAAI,SAAS,MAAM,IAAI,CAAC,GAAG,CAAC;IAAA;AAI/B,QAAA,MAAM,CAAC,GAAG;AAEZ,UAAI,CAAC,IAAI,WAAW,MAAM,CAAC,CAAC;IAAA,OACvB;AACL,UAAI,CAAC,IAAI;IAAA;EACX,WACS,OAAO,MAAM,OAAO,GAAG;AAC1B,UAAA,QAAQ,OAAO,MAAM,OAAO;AAE9B,QAAA,MAAM,CAAC,MAAM,eAAe;AAC9B,aAAO,CAAC,GAAG,GAAG,GAAG,CAAC;IAAA;AAGd,UAAA,WAAW,MAAM,CAAC,CAAC;AACzB,QAAI,CAAC,KAAK;AACD,aAAA;IAAA;AAET,QAAI,CAAC,IAAI;AACF,WAAA;EAAA,OACF;AACE,WAAA;EAAA;AAGF,SAAA;AACT;AAEgB,SAAA,eAAe,IAAI,IAAI;AAEhC,OAAA,GAAG,MAAM,GAAG;AAEZ,OAAA,GAAG,MAAM,GAAG;AACjB,QAAM,MAAM,KAAK,IAAI,GAAG,QAAQ,GAAG,MAAM;AAElC,SAAA,GAAG,SAAS,KAAK;AACtB,OAAG,KAAK,GAAG;EAAA;AAEN,SAAA,GAAG,SAAS,KAAK;AACtB,OAAG,KAAK,GAAG;EAAA;AAGb,WAAS,IAAI,GAAG,IAAI,KAAK,KAAK;AAC5B,UAAM,OAAO,SAAS,GAAG,CAAC,CAAC;AAC3B,UAAM,OAAO,SAAS,GAAG,CAAC,CAAC;AAE3B,QAAI,OAAO,MAAM;AACR,aAAA;IAAA,WACE,OAAO,MAAM;AACf,aAAA;IAAA;EACT;AAGK,SAAA;AACT;AClhBA,IAAqB,SAArB,MAA4B;EAK1B,YAAY,GAAW,GAAW;AAChC,SAAK,IAAI;AACT,SAAK,IAAI;AAEJ,SAAA,IAAI,KAAK,UAAU;EAAA;;;;;EAOnB,YAAY;AACjB,WAAO,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC;EAAA;;;;;;EAQrC,cAAc;AACnB,UAAM,gBAAgB,KAAK,MAAM,KAAK,GAAG,KAAK,CAAC;AAC3C,QAAA,YAAY,iBAAiB,MAAQ,KAAK;AAC9C,QAAI,YAAY,GAAG;AACJ,mBAAA;IAAA;AAER,WAAA;EAAA;;;;;;EAQF,gBAAgB;AACf,UAAA,IAAI,KAAK,YAAY;AAC3B,YAAQ,IAAI,OAAS;EAAA;AAEzB;AC2CA,IAAqB,QAArB,MAA2B;EAmBzB,YAAY,QAAgB;AAC1B,SAAK,OAAO,CAAA;AAEZ,SAAK,OAAO,OAAO;AACnB,SAAK,OAAO,OAAO;AAEnB,SAAK,OAAO,OAAO;AACnB,SAAK,OAAO,OAAO;AAEnB,SAAK,OAAO,OAAO;AACnB,SAAK,OAAO,OAAO;AAEnB,SAAK,KAAK,OAAO;AACjB,SAAK,KAAK,OAAO;AAEjB,SAAK,SAAS,OAAO;AACrB,SAAK,SAAS,OAAO;AAChB,SAAA,QAAQ,QAAQ,OAAO,KAAK;AAGjC,SAAK,OAAO,KAAK,IAAI,OAAO,MAAM,OAAO,IAAI;AAC7C,SAAK,OAAO,KAAK,IAAI,OAAO,MAAM,OAAO,IAAI;AAG7C,QAAI,EAAE,KAAK,SAAS,KAAK,KAAK,OAAO,KAAK,OAAO;AAC3C,UAAA,OAAO,UAAU,QAAW;AAC9B,aAAK,QAAQ;MAAA;AAEf,cAAQ,KAAK,gCAAgC;IAAA;AAM/C,SAAK,WAAW;AAEV,UAAA,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,OAAO,MAAM;AACxD,UAAA,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,QAAQ,OAAO,MAAM;AAE9D,QAAI,SAAS,KAAK,QAAQ,SAAS,KAAK,MAAM;AAC5C,cAAQ,KAAK,sCAAsC;IAAA;AAIrD,SAAK,eAAe,KAAK,MAAM,KAAK,OAAO,OAAO,MAAM,KAAK;AAC7D,SAAK,aAAa,gBAAgB,SAAS,OAAO,aAAa,KAAK,OAAO;AAC3E,QAAI,cAAc,QAAQ;AACxB,eAAS,iBAAiB,uEAAuE;IAAA;AAG9F,SAAA,QAAQ,QAAQ,OAAO,KAAK;AAE5B,SAAA,OAAO,KAAK,UAAU;AACtB,SAAA,QAAQ,KAAK,eAAe;EAAA;;EAI5B,YAAiC;AACtC,UAAM,OAAc,CAAA;AACpB,QAAI,IAAI;AAER,UAAM,EAAE,MAAM,MAAM,IAAI,GAAA,IAAO;AAE/B,aAAS,IAAI,GAAG,IAAI,MAAM,KAAK;AAC7B,YAAM,MAAa,CAAA;AACnB,eAAS,IAAI,GAAG,IAAI,MAAM,KAAK,KAAK;AAC5B,cAAA,IAAI,GAAG,CAAC;AACR,cAAA,IAAI,GAAG,CAAC;AACd,cAAM,QAAQ,KAAK,QAAQ,CAAC,KAAK,KAAK,QAAQ,CAAC;AAC/C,YAAI,CAAC,IAAI,QAAQ,IAAI,OAAO,GAAG,CAAC,IAAI;MAAA;AAGtC,UAAI,KAAK,cAAc;AACjB,YAAA,KAAK,IAAI,CAAC,CAAC;MAAA;AAGjB,WAAK,CAAC,IAAI;IAAA;AAEL,WAAA;EAAA;;;;EAMF,UAAU;AACf,SAAK,OAAO,CAAA;EAAC;;;;;EAOR,SAAS;AACP,WAAA,CAAC,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;EAAA;;;;;;;;;;;;;EAe5C,0BACN,GACA,GACA,KACA,KACA,KACA,KACA;AACA,UAAM,KAAK,IAAI;AACf,UAAM,KAAK,IAAI;AAEf,UAAM,IAAI,KAAK;AACf,UAAM,IAAI,IAAI;AACd,UAAM,IAAI,KAAK;AACf,UAAM,IAAI,IAAI;AACR,UAAA,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAChD,UAAA,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAC/C,WAAA,IAAI,OAAO,GAAG,CAAC;EAAA;;;;EAMxB,iBAAiB;AACf,QAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,KAAK,CAAC;AAAG;AAC3B,UAAA,OAAO,KAAK,KAAK;AACvB,UAAM,OAAO,KAAK,KAAK,CAAC,EAAE;AAGtB,QAAA;AACA,QAAA;AAEJ,aAAS,IAAI,GAAG,IAAI,MAAM,KAAK;AAC7B,eAAS,IAAI,GAAG,IAAI,MAAM,KAAK;AAC7B,cAAM,MAAM,KAAK,KAAK,CAAC,EAAE,CAAC;AAE1B,YAAI,QAAQ,MAAM;AAChB,gBAAM,MAAM,IAAI,KAAK,IAAI,UAAU;AAEnC,cAAI,QAAQ,QAAW;AACf,kBAAA;UAAA,WACG,QAAQ,QAAW;AACtB,kBAAA;AAGA,kBAAA,KAAK,IAAI,KAAK,GAAG;AACjB,kBAAA,KAAK,IAAI,KAAK,GAAG;UAAA,OAClB;AAGC,kBAAA,KAAK,IAAI,KAAK,GAAG;AACjB,kBAAA,KAAK,IAAI,KAAK,GAAG;UAAA;QACzB;MACF;IACF;AAEK,WAAA,CAAC,KAAK,GAAG;EAAA;;;;;;EAQX,QAAQ,GAAQ;AACd,WAAA,MAAM,QAAQ,MAAM;EAAA;EAGrB,uBAAuB;AAC7B,QAAI,OAAO,KAAK;AAChB,QAAI,OAAO,KAAK;AAEhB,QAAI,KAAK,YAAY;AACnB,UAAI,KAAK,cAAc;AACd,eAAA;AACA,eAAA;MAAA,OACF;AAEL,eAAO,KAAK,OAAO;AACnB,eAAO,KAAK,OAAO;MAAA;IACrB;AAEK,WAAA,CAAC,MAAM,IAAI;EAAA;EAGb,SAAS,KAAa,KAAa;AACxC,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,qBAAqB;AAE/C,QAAI,OAAO,OAAO,OAAO,QAAQ,OAAO,OAAO,KAAK;AAC3C,aAAA;IAAA,WACE,OAAO,QAAQ,OAAO,OAAO,OAAO,OAAO,KAAK;AAClD,aAAA;IAAA;AAGH,UAAA,cAAc,OAAO,QAAQ,OAAO;AACtC,QAAA;AACA,QAAA,KAAK,UAAU,GAAG;AACpB,mBAAa,OAAO,KAAK,QAAQ,OAAO,KAAK;IAAA,OACxC;AACL,mBAAa,OAAO,KAAK,QAAQ,OAAO,KAAK;IAAA;AAE/C,WAAO,eAAe;EAAA;;;;;;EAQjB,kBAAkB,KAAa,KAAa;AACjD,UAAM,IAAI,SAAS,MAAM,KAAK,MAAM,GAAG,IAAI,KAAK;AAChD,QAAI,KAAK,OAAO;AACd,YAAM,KAAK,KAAK,OAAO,OAAO,KAAK;AAC5B,aAAA,CAAC,GAAG,CAAC;IAAA,OACP;AACL,YAAM,KAAK,KAAK,OAAO,OAAO,KAAK;AAC5B,aAAA,CAAC,GAAG,CAAC;IAAA;EACd;;;;;;;EASK,QAAQ,KAAa,KAAa;AACvC,QAAI,OAAO;AAEX,QAAI,KAAK,OAAO;AACP,aAAA;IAAA,WACE,KAAK,SAAS,KAAK,GAAG,GAAG;AAC3B,aAAA;IAAA;AAGT,QAAI,CAAC;AAAa,aAAA;AAElB,UAAM,UAAU,KAAK,kBAAkB,KAAK,GAAG;AAC/C,UAAM,KAAK,KAAK,MAAM,QAAQ,CAAC,CAAC;AAChC,UAAM,KAAK,KAAK,MAAM,QAAQ,CAAC,CAAC;AAE1B,UAAA,KAAK,KAAK,iBAAiB,EAAE;AAC7B,UAAA,KAAK,KAAK,cAAc,EAAE;AAEzB,WAAA,KAAK,eAAe,IAAI,EAAE;EAAA;;;;;;;EAS5B,oBAAoB,KAAa,KAAa;AACnD,QAAI,OAAO;AAEX,QAAI,KAAK,OAAO;AACP,aAAA;IAAA,WACE,KAAK,SAAS,KAAK,GAAG,GAAG;AAC3B,aAAA;IAAA;AAGT,QAAI,CAAC;AAAa,aAAA;AAElB,UAAM,CAAC,GAAG,CAAC,IAAI,KAAK,kBAAkB,KAAK,GAAG;AACvC,WAAA,KAAK,iBAAiB,GAAG,CAAC;EAAA;EAG5B,WAAW,KAAa,KAAa;AAC1C,UAAM,QAAQ,KAAK,QAAQ,KAAK,GAAG;AACnC,WAAO,UAAU;EAAA;;;;;;EAQX,iBAAiB,GAAW,GAAW;AAS7C,UAAM,UAAU,KAAK,0BAA0B,GAAG,CAAC;AACnD,UAAM,CAAC,IAAI,IAAI,IAAI,EAAE,IAAI;AACzB,UAAM,SAAS,KAAK,yBAAyB,IAAI,IAAI,IAAI,EAAE;AAC3D,QAAI,QAAQ;AACV,YAAM,CAAC,KAAK,KAAK,KAAK,GAAG,IAAI;AAEtB,aAAA,KAAK,0BAA0B,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,GAAG;IAAA;AAGnE,WAAA;EAAA;;;;;;;;EAUD,iBAAiB,IAAY;AACnC,QAAI,IAAI;AACR,QAAI,KAAK,GAAG;AACN,UAAA;IAAA;AAEA,UAAA,SAAS,KAAK,OAAO;AAC3B,QAAI,KAAK,QAAQ;AACX,UAAA;IAAA;AAEC,WAAA;EAAA;;;;;;;;EAUD,cAAc,IAAY;AAChC,QAAI,IAAI;AACR,QAAI,KAAK,GAAG;AACN,UAAA;IAAA;AAEA,UAAA,SAAS,KAAK,OAAO;AAC3B,QAAI,KAAK,QAAQ;AACX,UAAA;IAAA;AAEC,WAAA;EAAA;;;;;;;;EAUD,0BAA0B,GAAW,GAAW;AAChD,UAAA,KAAK,KAAK,MAAM,CAAC;AACvB,QAAI,KAAK,KAAK;AAEd,QAAI,KAAK,gBAAgB,MAAM,KAAK,MAAM;AACnC,WAAA;IAAA;AAEF,SAAA,KAAK,iBAAiB,EAAE;AAE7B,UAAM,KAAK,KAAK,cAAc,KAAK,MAAM,CAAC,CAAC;AAC3C,UAAM,KAAK,KAAK,cAAc,KAAK,CAAC;AAEpC,WAAO,CAAC,IAAI,IAAI,IAAI,EAAE;EAAA;;;;;;;;;;;EAahB,yBAAyB,IAAY,IAAY,IAAY,IAAY;AAC3E,QAAA;AACJ,QAAK,MAAM,KAAK,KAAK,EAAE,GAAI;AACnB,YAAA,MAAM,IAAI,EAAE;AACZ,YAAA,MAAM,IAAI,EAAE;AAClB,UAAI,KAAK,QAAQ,GAAG,KAAK,KAAK,QAAQ,GAAG,MAAM,MAAM,KAAK,KAAK,EAAE,IAAI;AAE7D,cAAA,MAAM,IAAI,EAAE;AACZ,cAAA,MAAM,IAAI,EAAE;AAClB,YAAI,KAAK,QAAQ,GAAG,KAAK,KAAK,QAAQ,GAAG,GAAG;AAC1C,iBAAO,CAAC,KAAK,KAAK,KAAK,GAAG;QAAA;MAC5B;IACF;AAEK,WAAA;EAAA;;;;;;;EASF,eAAe,GAAW,GAAW;AAC1C,WAAO,KAAK,KAAK,CAAC,EAAE,CAAC;EAAA;;;;;;;EAShB,gBAAgB,GAAW,GAAW;AACrC,UAAA,MAAM,KAAK,aAAa,CAAC;AACzB,UAAA,MAAM,KAAK,YAAY,CAAC;AAEvB,WAAA,CAAC,KAAK,GAAG;EAAA;;;;;;EAQV,aAAa,GAAW;AACxB,UAAA,aAAa,KAAK,SAAS;AACjC,QAAI,MAAM,KAAK,OAAO,aAAa,IAAI,KAAK;AAC5C,QAAI,KAAK,YAAY;AACb,YAAA,MAAM,MAAM,MAAM,MAAM;IAAA;AAEzB,WAAA;EAAA;;;;;;EAQD,YAAY,GAAW;AACvB,UAAA,aAAa,KAAK,SAAS;AACjC,WAAO,KAAK,OAAO,aAAa,IAAI,KAAK;EAAA;;;;;;;;;EAWpC,UACL,IAAe,CAAA,GACf,OACA,QACA,WACA;AACA,UAAM,IAAK,KAAK,OAAA,KAAY,SAAS,KAAK,QAAS;AACnD,UAAM,IAAK,KAAK,OAAA,KAAY,UAAU,KAAK,QAAS;AAEpD,UAAM,SAAS,UAAU,CAAC,GAAG,CAAC,CAAC;AAC/B,QAAI,WAAW,MAAM;AACjB,QAAA,IAAI,OAAO,CAAC;AACZ,QAAA,IAAI,OAAO,CAAC;IAAA,OACT;AACH,QAAA,IAAI,KAAK,aAAa,CAAC;AACvB,QAAA,IAAI,KAAK,YAAY,CAAC;IAAA;AAGnB,WAAA;EAAA;;;;;EAOF,cAAc;AACnB,WAAO,KAAK;EAAA;AAEhB;ACjkBO,IAAM,iBAAiB;EAC5B,aAAa;;EACb,WAAW;;EACX,YAAY;EACZ,eAAe,IAAI;;EAEnB,QAAQ;;;EAER,OAAO;EACP,WAAW;EACX,eAAe;AACjB;AAkEA,SAAS,SAAS,GAAW,KAAa,KAAa,YAAsB;AAE3E,SAAO,KAAK,IAAI,GAAG,KAAK,IAAI,WAAW,SAAS,GAAG,KAAK,OAAQ,IAAI,QAAQ,MAAM,QAAS,WAAW,SAAS,EAAE,CAAC,CAAC;AACrH;AAEA,IAAM,YAAN,MAAM,UAAS;EAcb,YAAY,KAA+B,SAA4B,OAAe;AAPtF,SAAQ,YAAmB,CAAA;AAG3B,SAAQ,YAAY;AAKlB,SAAK,MAAM;AAEP,QAAA,CAAC,KAAK,KAAK;AACP,YAAA,IAAI,MAAM,WAAW;IAAA;AAG7B,SAAK,UAAU,KAAK,QAAQ,KAAK,IAAI;AAErC,SAAK,WAAW,OAAO;AAEvB,QAAI,OAAO;AACT,WAAK,WAAW,KAAK;IAAA;EACvB;;;;;EAOK,WAAW,SAA4B;AAC5C,SAAK,UAAU,EAAE,GAAG,gBAAgB,GAAG,QAAQ;AAE/C,UAAM,EAAE,OAAO,OAAO,IAAI,KAAK,IAAI;AAE/B,QAAA,iBAAiB,WAAW,EAAE,YAAY,YAAY,SAAS,KAAK,QAAQ,WAAW,GAAG;AAEvF,WAAA,QAAQ,SAAS,KAAK,QAAQ;IAAA;AAGjC,QAAA,wBAAwB,WAAW,EAAE,WAAW,YAAY,SAAS,KAAK,QAAQ,kBAAkB,GAAG;AACpG,WAAA,QAAQ,QAAQ,KAAK,MAAM,QAAQ,SAAU,KAAK,QAAQ,kBAA6B;IAAA;AAG9F,SAAK,UAAU;EAAA;;;;EAMV,aAAa;AAClB,WAAO,KAAK;EAAA;;;;;EAOP,WAAW,OAAc;AAC9B,SAAK,QAAQ;AACT,QAAA,CAAC,KAAK,WAAW;AACnB;IAAA;AAEG,SAAA,YAAY,KAAK,qBAAqB;EAAA;;EAItC,WAAW,MAAsC;AAChD,UAAA,IAAI,MAAM,2BAA2B;EAAA;;EAItC,aAAa,MAAsC;AAClD,UAAA,IAAI,MAAM,6BAA6B;EAAA;;;;;EAOxC,qBAAqB,aAAwC;AAC5D,UAAA,IAAI,MAAM,mBAAmB;EAAA;;;;EAM9B,cAAc;AACnB,SAAK,KAAK;AACL,SAAA,IAAI,UAAU,GAAG,GAAG,KAAK,IAAI,OAAO,OAAO,KAAK,IAAI,OAAO,MAAM;AACtE,SAAK,YAAY;EAAA;EAGnB,SAAS;AACP,WAAO,CAAC,KAAK;EAAA;;;;EAMR,QAAQ;AACb,SAAK,WAAW;AAChB,SAAK,YAAY;AACZ,SAAA,OAAO,KAAK,IAAI;AACrB,SAAK,QAAQ;EAAA;;;;EAMR,OAAO;AACZ,yBAAqB,KAAK,aAAa;AACvC,SAAK,WAAW;AAChB,SAAK,YAAY;EAAA;EAGZ,UAAU;AACf,QAAI,KAAK,eAAe;AACtB,2BAAqB,KAAK,aAAa;IAAA;AAEpC,SAAA,gBAAgB,sBAAsB,KAAK,OAAO;AACjD,UAAA,MAAM,KAAK,IAAI;AACf,UAAA,QAAQ,MAAM,KAAK;AACrB,QAAA,QAAQ,KAAK,QAAQ,WAAW;AAClC,WAAK,OAAO,MAAO,QAAQ,KAAK,QAAQ;AACxC,WAAK,OAAO;IAAA;EACd;;;;EAMK,YAAY;AACjB,SAAK,YAAY;AACb,QAAA,CAAC,KAAK,OAAO;AACf;IAAA;AAEG,SAAA,YAAY,KAAK,qBAAqB;AAC3C,SAAK,YAAY;AAEjB,QAAI,CAAC,KAAK,YAAY,CAAC,KAAK,WAAW;AACrC,WAAK,WAAW;AACX,WAAA,OAAO,KAAK,IAAI;AACrB,WAAK,QAAQ;IAAA;EACf;;;;EAMK,SAAS;AACd,SAAK,cAAc;AACnB,SAAK,cAAc;AACnB,SAAK,WAAW;EAAA;;;;EAMX,aAAa;EAAA;EAIZ,gBAAgB;AACtB,UAAM,EAAE,OAAO,OAAO,IAAI,KAAK,IAAI;AACnC,UAAM,YAAY,KAAK;AAEjB,UAAA,SAAS,KAAK,QAAQ;AACtB,UAAA,gBAAgB,WAAW,KAAK,QAAQ,aAAa,IACvD,KAAK,QAAQ,cAAA,IACb,KAAK,QAAQ;AAEjB,QAAI,IAAI;AACR,UAAM,MAAM,UAAU;AACf,WAAA,IAAI,KAAK,KAAK;AACb,YAAA,WAAW,UAAU,CAAC;AAExB,UAAA,SAAS,MAAM,QAAQ;AACzB,iBAAS,MAAM;AAEf,aAAK,MAAM,UAAU,UAAU,OAAO,QAAQ,KAAK,SAAS;MAAA;AAG9D,YAAM,IAAI,SAAS;AACnB,YAAM,IAAI,SAAS;AAEnB,YAAM,SAAS,KAAK,MAAM,oBAAoB,GAAG,CAAC;AAElD,UAAI,WAAW,MAAM;AACnB,iBAAS,MAAM;MAAA,OACV;AACC,cAAA,KAAK,IAAI,OAAO,IAAI;AACpB,cAAA,KAAK,IAAI,OAAO,IAAI;AAE1B,YAAI,KAAK,MAAM,WAAW,IAAI,EAAE,GAAG;AAEjC,mBAAS,KAAK;AACd,mBAAS,KAAK;AACd,mBAAS,IAAI,OAAO;QAAA,OACf;AAEL,mBAAS,IAAI;AACb,mBAAS,IAAI;AACb,mBAAS,MAAM;QAAA;MACjB;AAGO,eAAA;IAAA;EACX;EAGM,SAAS;AACT,UAAA,OAAO,KAAK,IAAI;AACtB,SAAK,IAAI,2BAA2B;AAC/B,SAAA,IAAI,SAAS,GAAG,GAAG,KAAK,IAAI,OAAO,OAAO,KAAK,IAAI,OAAO,MAAM;AACrE,SAAK,IAAI,2BAA2B;EAAA;EAG9B,gBAAgB;AACtB,UAAM,YAAY,KAAK;AACvB,SAAK,OAAO;AACP,SAAA,IAAI,cAAc,KAAK,QAAQ;AAEpC,SAAK,IAAI,YAAY,iBAAiB,KAAK,QAAQ,WAAW;AACzD,SAAA,IAAI,YAAa,SAAS,KAAK,QAAQ,SAAS,IAAI,KAAK,QAAQ,YAAY;AAC7E,SAAA,IAAI,cAAe,SAAS,KAAK,QAAQ,UAAU,IAAI,KAAK,QAAQ,aAAa;AAEtF,QAAI,IAAI;AACR,UAAM,MAAM,UAAU;AAClB,QAAA,KAAK,SAAS,MAAM,GAAG;AACrB,UAAA;AACA,UAAA;AAEA,UAAA,SAAS,KAAK,QAAQ,WAAW,KAAK,SAAS,KAAK,QAAQ,WAAW,GAAG;AAC5E,cAAM,KAAK,QAAQ;AACnB,cAAM,KAAK,QAAQ;MAAA,OACd;AAEL,SAAC,KAAK,GAAG,IAAI,KAAK,MAAM;MAAA;AAEnB,aAAA,IAAI,KAAK,KAAK;AACd,aAAA,KAAK,QAAQ,gBAAgB,uBAAuB,mBAAmB,EAAE,UAAU,CAAC,GAAG,KAAK,GAAG;MAAA;IACtG;EACF;;;;;;;EASM,kBAAkB,UAAe,KAAa,KAAa;AAGjE,UAAM,YAA8B,CAAC,SAAS,GAAG,SAAS,CAAC;AAE3D,UAAM,YAA8B,CAAC,SAAS,IAAI,SAAS,EAAE;AAG3D,QAAA,aACA,aACA,SAAS,UAAU,CAAC,CAAC,KACrB,SAAS,UAAU,CAAC,CAAC,KACrB,SAAS,UAAU,CAAC,CAAC,KACrB,SAAS,UAAU,CAAC,CAAC,KACrB,SAAS,OAAO,KAAK,QAAQ,QAC7B;AACA,WAAK,IAAI,UAAU;AACnB,WAAK,IAAI,OAAO,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC;AAC1C,WAAK,IAAI,OAAO,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC;AAE1C,UAAI,WAAW,KAAK,QAAQ,UAAU,GAAG;AAEvC,aAAK,IAAI,cAAc,KAAK,QAAQ,WAAW,SAAS,CAAC;MAAA,WAChD,MAAM,QAAQ,KAAK,QAAQ,UAAU,GAAG;AAC3C,cAAA,WAAW,SAAS,SAAS,GAAG,KAAK,KAAK,KAAK,QAAQ,UAAU;AACvE,aAAK,IAAI,cAAc,KAAK,QAAQ,WAAW,QAAQ;MAAA;AAGzD,UAAI,WAAW,KAAK,QAAQ,SAAS,GAAG;AAEtC,aAAK,IAAI,YAAY,KAAK,QAAQ,UAAU,SAAS,CAAC;MAAA;AAGxD,eAAS,IAAI,SAAS;AACtB,eAAS,IAAI,SAAS;AAEtB,WAAK,IAAI,OAAO;IAAA;EAClB;;;;;;;EASM,mBAAmB,UAAe,KAAa,KAAa;AAGlE,UAAM,SAA2B,CAAC,SAAS,GAAG,SAAS,CAAC;AAExD,UAAM,SAA2B,CAAC,SAAS,IAAI,SAAS,EAAE;AAE1D,QACE,UACA,UACA,SAAS,OAAO,CAAC,CAAC,KAClB,SAAS,OAAO,CAAC,CAAC,KAClB,SAAS,OAAO,CAAC,CAAC,KAClB,SAAS,OAAO,CAAC,CAAC,KAClB,KAAK,qBAAqB,MAAM,KAChC,SAAS,OAAO,KAAK,QAAQ,QAC7B;AACM,YAAA,YAAY,KAAK,QAAQ,MAAM;AAC/B,YAAA,YAAY,KAAK,QAAQ,MAAM;AAErC,UAAI,aAAa,WAAW;AAC1B,aAAK,IAAI,UAAU;AACnB,aAAK,IAAI,OAAO,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC;AAC1C,aAAK,IAAI,OAAO,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC;AAC1C,iBAAS,IAAI,SAAS;AACtB,iBAAS,IAAI,SAAS;AAEtB,YAAI,WAAW,KAAK,QAAQ,UAAU,GAAG;AAEvC,eAAK,IAAI,cAAc,KAAK,QAAQ,WAAW,SAAS,CAAC;QAAA,WAChD,MAAM,QAAQ,KAAK,QAAQ,UAAU,GAAG;AAC3C,gBAAA,WAAW,SAAS,SAAS,GAAG,KAAK,KAAK,KAAK,QAAQ,UAAU;AACvE,eAAK,IAAI,cAAc,KAAK,QAAQ,WAAW,QAAQ;QAAA;AAGzD,YAAI,WAAW,KAAK,QAAQ,SAAS,GAAG;AAEtC,eAAK,IAAI,YAAY,KAAK,QAAQ,UAAU,SAAS,CAAC;QAAA;AAGxD,aAAK,IAAI,OAAO;MAAA;IAClB;EACF;EAGM,uBAAuB;AAE7B,UAAM,EAAE,OAAO,OAAO,IAAI,KAAK,IAAI;AACnC,UAAM,gBAAgB,OAAO,KAAK,QAAQ,UAAU,aAAa,KAAK,QAAQ,MAAM,IAAI,IAAI,KAAK,QAAQ;AACzG,UAAM,YAAmB,CAAA;AACrB,QAAA,CAAC,KAAK,OAAO;AACf,aAAO,CAAA;IAAC;AAEV,QAAI,IAAI;AACD,WAAA,IAAI,eAAe,KAAK;AACnB,gBAAA;QACR,KAAK,MAAM;UACT;YACE,KAAK,KAAK,UAAU;UAAA;UAEtB;UACA;UACA,KAAK;QAAA;MACP;IACF;AAEK,WAAA;EAAA;EAGD,YAAY;AAClB,WAAO,KAAK,MAAM,KAAK,OAAA,IAAW,KAAK,QAAQ,MAAM;EAAA;AAEzD;AArXE,UAAc,QAAQ;AADxB,IAAM,WAAN;",
  "names": []
}
