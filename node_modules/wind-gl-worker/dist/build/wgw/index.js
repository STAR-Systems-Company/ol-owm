define(['./shared'], (function (Actor) { 'use strict';

let u = "";
function setWorkerUrl(url) {
  u = url;
}
function getWorkerUrl() {
  return u;
}
let deps = [];
function configDeps(d) {
  deps = d;
}
function getConfigDeps() {
  return deps;
}

function workerFactory() {
  return new Worker(getWorkerUrl());
}

const PRELOAD_POOL_ID = "__wind_layer_preloaded_worker_pool__";
class WorkerPool {
  constructor() {
    this.active = {};
  }
  /**
   * 获取 `Worker` 实例
   * @param id
   */
  acquire(id) {
    if (!this.workers) {
      this.workers = [];
      for (let i = 0; i < WorkerPool.workerCount; i++) {
        const worker = workerFactory();
        if (worker) {
          this.workers.push(worker);
        }
      }
    }
    this.active[id] = true;
    return this.workers.slice();
  }
  /**
   * 释放所有 `Worker`
   * @param id
   */
  release(id) {
    delete this.active[id];
    if (this.numActive() === 0 && this.workers) {
      this.workers.forEach((w) => {
        w.terminate();
      });
      this.workers = null;
    }
  }
  isPreloaded() {
    return !!this.active[PRELOAD_POOL_ID];
  }
  /**
   * 获取激活的`Worker` 数量
   */
  numActive() {
    return Object.keys(this.active).length;
  }
}
const hardwareConcurrency = typeof navigator !== "undefined" && navigator.hardwareConcurrency || 4;
const availableLogicalProcessors = Math.floor(hardwareConcurrency / 2);
WorkerPool.workerCount = Math.max(Math.min(availableLogicalProcessors, 6), 1);

class Dispatcher {
  constructor(workerPool, parent, dispatcherId) {
    this.workerPool = workerPool;
    this.actors = [];
    this.currentActor = 0;
    this.id = Actor.uid("dispatcher");
    this.dispatcherId = dispatcherId;
    const workers = this.workerPool.acquire(this.dispatcherId);
    for (let i = 0; i < workers.length; i++) {
      const worker = workers[i];
      const actor = new Actor.Actor(worker, parent, this.dispatcherId);
      actor.name = `Worker ${i}`;
      this.actors.push(actor);
    }
    if (!this.actors.length)
      throw new Error("No actors found");
  }
  /**
   * 广播到所有 Actor
   * @param type
   * @param data
   * @param cb
   */
  broadcast(type, data, cb) {
    cb = cb || Actor.nullFunction;
    Actor.asyncAll(
      this.actors,
      (actor, done) => {
        actor.send(type, data, done);
      },
      cb
    );
  }
  send(type, data, cb, id) {
    const actor = this.getActor(id);
    if (actor) {
      actor.send(type, data, cb);
    }
  }
  /**
   * 获取要发送消息的 `Actor`
   * TIP: 是否需要实现 `Actor` 是否占用判断
   */
  getActor(id) {
    if (id !== void 0) {
      const index = this.actors.findIndex((a) => a.id === id);
      if (index > -1) {
        this.currentActor = index;
      } else {
        this.currentActor = (this.currentActor + 1) % this.actors.length;
      }
    } else {
      this.currentActor = (this.currentActor + 1) % this.actors.length;
    }
    return this.actors[this.currentActor];
  }
  remove(removed = true) {
    this.actors.forEach((actor) => {
      actor.remove();
    });
    this.actors = [];
    if (removed)
      this.workerPool.release(this.id);
  }
}

let globalWorkerPool;
function getGlobalWorkerPool() {
  if (!globalWorkerPool) {
    globalWorkerPool = new WorkerPool();
  }
  return globalWorkerPool;
}
function prewarm() {
  const workerPool = getGlobalWorkerPool();
  workerPool.acquire(PRELOAD_POOL_ID);
}
const exported = {
  utils: Actor.utils,
  request: Actor.getRequest,
  register: Actor.register,
  configDeps,
  getConfigDeps,
  prewarm,
  getReferrer: Actor.getReferrer,
  setWorkerUrl,
  getGlobalWorkerPool,
  Actor: Actor.Actor,
  WorkerPool,
  Dispatcher,
  RequestScheduler: Actor.RequestScheduler,
  ThrottledInvoker: Actor.ThrottledInvoker
};

return exported;

}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb25maWcudHMiLCIuLi8uLi8uLi9zcmMvd29ya2VyRmFjdG9yeS50cyIsIi4uLy4uLy4uL3NyYy9Xb3JrZXJQb29sLnRzIiwiLi4vLi4vLi4vc3JjL0Rpc3BhdGNoZXIudHMiLCIuLi8uLi8uLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHUgPSAnJztcbmV4cG9ydCBmdW5jdGlvbiBzZXRXb3JrZXJVcmwodXJsOiBzdHJpbmcpIHtcbiAgdSA9IHVybDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdvcmtlclVybCgpIHtcbiAgcmV0dXJuIHU7XG59XG5cbmxldCBkZXBzOiBzdHJpbmdbXSA9IFtdO1xuXG4vKipcbiAqIOiuvue9ruWklumDqOS+nei1lueahOi3r+W+hFxuICog5LiA6Iis5oiR5Lus5Zyo5L2/55SoIGltcG9ydFNjcmlwdHMg5pe26ZyA6KaB5oyH5a6aXG4gKiBAcGFyYW0gZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29uZmlnRGVwcyhkOiBzdHJpbmdbXSkge1xuICBkZXBzID0gZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZ0RlcHMoKSB7XG4gIHJldHVybiBkZXBzO1xufVxuIiwiaW1wb3J0IHsgZ2V0V29ya2VyVXJsIH0gZnJvbSAnLi9jb25maWcnO1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlTGlzdGVuZXIgPSAoYTogeyBkYXRhOiBhbnk7IHRhcmdldDogYW55IH0pID0+IHVua25vd247XG5cbi8vIFRoZSBtYWluIHRocmVhZCBpbnRlcmZhY2UuIFByb3ZpZGVkIGJ5IFdvcmtlciBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQsXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtlckludGVyZmFjZSB7XG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZTogJ21lc3NhZ2UnLCBsaXN0ZW5lcjogTWVzc2FnZUxpc3RlbmVyKTogdm9pZDtcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlOiAnbWVzc2FnZScsIGxpc3RlbmVyOiBNZXNzYWdlTGlzdGVuZXIpOiB2b2lkO1xuICBwb3N0TWVzc2FnZShtZXNzYWdlOiBhbnkpOiB2b2lkO1xuICB0ZXJtaW5hdGUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd29ya2VyRmFjdG9yeSgpIHtcbiAgcmV0dXJuIG5ldyBXb3JrZXIoZ2V0V29ya2VyVXJsKCkpO1xufVxuIiwiaW1wb3J0IHdvcmtlckZhY3RvcnkgZnJvbSAnLi93b3JrZXJGYWN0b3J5JztcbmltcG9ydCB0eXBlIHsgV29ya2VySW50ZXJmYWNlIH0gZnJvbSAnLi93b3JrZXJGYWN0b3J5JztcblxuZXhwb3J0IGNvbnN0IFBSRUxPQURfUE9PTF9JRCA9ICdfX3dpbmRfbGF5ZXJfcHJlbG9hZGVkX3dvcmtlcl9wb29sX18nO1xuXG4vKipcbiAqIOWIm+W7umB3ZWJ3b3JrZXJgIOe6v+eoi+axoFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JrZXJQb29sIHtcbiAgc3RhdGljIHdvcmtlckNvdW50OiBudW1iZXI7XG5cbiAgYWN0aXZlOiB7XG4gICAgW18gaW4gbnVtYmVyIHwgc3RyaW5nXTogYm9vbGVhbjtcbiAgfTtcbiAgd29ya2VyczogV2l0aE51bGw8V29ya2VySW50ZXJmYWNlW10+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYWN0aXZlID0ge307XG4gIH1cblxuICAvKipcbiAgICog6I635Y+WIGBXb3JrZXJgIOWunuS+i1xuICAgKiBAcGFyYW0gaWRcbiAgICovXG4gIGFjcXVpcmUoaWQ6IG51bWJlciB8IHN0cmluZyk6IFdvcmtlckludGVyZmFjZVtdIHtcbiAgICBpZiAoIXRoaXMud29ya2Vycykge1xuICAgICAgdGhpcy53b3JrZXJzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFdvcmtlclBvb2wud29ya2VyQ291bnQ7IGkrKykge1xuICAgICAgICBjb25zdCB3b3JrZXIgPSB3b3JrZXJGYWN0b3J5KCk7XG4gICAgICAgIGlmICh3b3JrZXIpIHtcbiAgICAgICAgICB0aGlzLndvcmtlcnMucHVzaCh3b3JrZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hY3RpdmVbaWRdID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcy53b3JrZXJzLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICog6YeK5pS+5omA5pyJIGBXb3JrZXJgXG4gICAqIEBwYXJhbSBpZFxuICAgKi9cbiAgcmVsZWFzZShpZDogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgZGVsZXRlIHRoaXMuYWN0aXZlW2lkXTtcbiAgICBpZiAodGhpcy5udW1BY3RpdmUoKSA9PT0gMCAmJiB0aGlzLndvcmtlcnMpIHtcbiAgICAgIHRoaXMud29ya2Vycy5mb3JFYWNoKCh3KSA9PiB7XG4gICAgICAgIHcudGVybWluYXRlKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMud29ya2VycyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgaXNQcmVsb2FkZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5hY3RpdmVbUFJFTE9BRF9QT09MX0lEXTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmv4DmtLvnmoRgV29ya2VyYCDmlbDph49cbiAgICovXG4gIG51bUFjdGl2ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmFjdGl2ZSkubGVuZ3RoO1xuICB9XG59XG5cbmNvbnN0IGhhcmR3YXJlQ29uY3VycmVuY3kgPSAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kpIHx8IDQ7XG5jb25zdCBhdmFpbGFibGVMb2dpY2FsUHJvY2Vzc29ycyA9IE1hdGguZmxvb3IoaGFyZHdhcmVDb25jdXJyZW5jeSAvIDIpO1xuV29ya2VyUG9vbC53b3JrZXJDb3VudCA9IE1hdGgubWF4KE1hdGgubWluKGF2YWlsYWJsZUxvZ2ljYWxQcm9jZXNzb3JzLCA2KSwgMSk7XG4iLCJpbXBvcnQgQWN0b3IgZnJvbSAnLi9BY3Rvcic7XG5pbXBvcnQgdHlwZSBXb3JrZXJQb29sIGZyb20gJy4vV29ya2VyUG9vbCc7XG5pbXBvcnQgeyBudWxsRnVuY3Rpb24sIGFzeW5jQWxsLCB1aWQgfSBmcm9tICcuL3V0aWwnO1xuXG5jbGFzcyBEaXNwYXRjaGVyIHtcbiAgd29ya2VyUG9vbDogV29ya2VyUG9vbDtcbiAgYWN0b3JzOiBBcnJheTxBY3Rvcj47XG4gIGN1cnJlbnRBY3RvcjogbnVtYmVyO1xuICBpZDogc3RyaW5nO1xuICBkaXNwYXRjaGVySWQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcih3b3JrZXJQb29sOiBXb3JrZXJQb29sLCBwYXJlbnQ6IGFueSwgZGlzcGF0Y2hlcklkOiBudW1iZXIpIHtcbiAgICB0aGlzLndvcmtlclBvb2wgPSB3b3JrZXJQb29sO1xuICAgIHRoaXMuYWN0b3JzID0gW107XG4gICAgdGhpcy5jdXJyZW50QWN0b3IgPSAwO1xuICAgIHRoaXMuaWQgPSB1aWQoJ2Rpc3BhdGNoZXInKTtcbiAgICB0aGlzLmRpc3BhdGNoZXJJZCA9IGRpc3BhdGNoZXJJZDtcbiAgICBjb25zdCB3b3JrZXJzID0gdGhpcy53b3JrZXJQb29sLmFjcXVpcmUodGhpcy5kaXNwYXRjaGVySWQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ya2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgd29ya2VyID0gd29ya2Vyc1tpXTtcbiAgICAgIGNvbnN0IGFjdG9yID0gbmV3IEFjdG9yKHdvcmtlciwgcGFyZW50LCB0aGlzLmRpc3BhdGNoZXJJZCk7XG4gICAgICBhY3Rvci5uYW1lID0gYFdvcmtlciAke2l9YDtcbiAgICAgIHRoaXMuYWN0b3JzLnB1c2goYWN0b3IpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuYWN0b3JzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdObyBhY3RvcnMgZm91bmQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlub/mkq3liLDmiYDmnIkgQWN0b3JcbiAgICogQHBhcmFtIHR5cGVcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIGNiXG4gICAqL1xuICBicm9hZGNhc3QodHlwZTogc3RyaW5nLCBkYXRhOiB1bmtub3duLCBjYj86ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgY2IgPSBjYiB8fCBudWxsRnVuY3Rpb247XG4gICAgYXN5bmNBbGwoXG4gICAgICB0aGlzLmFjdG9ycyxcbiAgICAgIChhY3RvciwgZG9uZSkgPT4ge1xuICAgICAgICBhY3Rvci5zZW5kKHR5cGUsIGRhdGEsIGRvbmUpO1xuICAgICAgfSxcbiAgICAgIGNiLFxuICAgICk7XG4gIH1cblxuICBzZW5kKHR5cGUsIGRhdGE6IGFueSwgY2I/OiBhbnksIGlkPzogc3RyaW5nKSB7XG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmdldEFjdG9yKGlkKTtcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGFjdG9yLnNlbmQodHlwZSwgZGF0YSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bopoHlj5HpgIHmtojmga/nmoQgYEFjdG9yYFxuICAgKiBUSVA6IOaYr+WQpumcgOimgeWunueOsCBgQWN0b3JgIOaYr+WQpuWNoOeUqOWIpOaWrVxuICAgKi9cbiAgZ2V0QWN0b3IoaWQ/OiBzdHJpbmcpOiBBY3RvciB7XG4gICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5hY3RvcnMuZmluZEluZGV4KChhKSA9PiBhLmlkID09PSBpZCk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRBY3RvciA9IGluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QWN0b3IgPSAodGhpcy5jdXJyZW50QWN0b3IgKyAxKSAlIHRoaXMuYWN0b3JzLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50QWN0b3IgPSAodGhpcy5jdXJyZW50QWN0b3IgKyAxKSAlIHRoaXMuYWN0b3JzLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYWN0b3JzW3RoaXMuY3VycmVudEFjdG9yXTtcbiAgfVxuXG4gIHJlbW92ZShyZW1vdmVkID0gdHJ1ZSkge1xuICAgIHRoaXMuYWN0b3JzLmZvckVhY2goKGFjdG9yKSA9PiB7XG4gICAgICBhY3Rvci5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLmFjdG9ycyA9IFtdO1xuICAgIGlmIChyZW1vdmVkKSB0aGlzLndvcmtlclBvb2wucmVsZWFzZSh0aGlzLmlkKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaXNwYXRjaGVyO1xuIiwiaW1wb3J0IFdvcmtlclBvb2wsIHsgUFJFTE9BRF9QT09MX0lEIH0gZnJvbSAnLi9Xb3JrZXJQb29sJztcbmltcG9ydCBEaXNwYXRjaGVyIGZyb20gJy4vRGlzcGF0Y2hlcic7XG5pbXBvcnQgQWN0b3IgZnJvbSAnLi9BY3Rvcic7XG5pbXBvcnQgcmVxdWVzdCBmcm9tICcuL1JlcXVlc3QnO1xuaW1wb3J0IFJlcXVlc3RTY2hlZHVsZXIgZnJvbSAnLi9SZXF1ZXN0U2NoZWR1bGVyJztcbmltcG9ydCBUaHJvdHRsZWRJbnZva2VyIGZyb20gJy4vVGhyb3R0bGVkSW52b2tlcic7XG5pbXBvcnQgeyBnZXRSZWZlcnJlciB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBzZXRXb3JrZXJVcmwsIGNvbmZpZ0RlcHMsIGdldENvbmZpZ0RlcHMgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyByZWdpc3RlciB9IGZyb20gJy4vd2ViV29ya2VyVHJhbnNmZXInO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi91dGlsJztcblxubGV0IGdsb2JhbFdvcmtlclBvb2w7XG5cbmZ1bmN0aW9uIGdldEdsb2JhbFdvcmtlclBvb2woKSB7XG4gIGlmICghZ2xvYmFsV29ya2VyUG9vbCkge1xuICAgIGdsb2JhbFdvcmtlclBvb2wgPSBuZXcgV29ya2VyUG9vbCgpO1xuICB9XG4gIHJldHVybiBnbG9iYWxXb3JrZXJQb29sO1xufVxuXG5mdW5jdGlvbiBwcmV3YXJtKCkge1xuICBjb25zdCB3b3JrZXJQb29sID0gZ2V0R2xvYmFsV29ya2VyUG9vbCgpO1xuICB3b3JrZXJQb29sLmFjcXVpcmUoUFJFTE9BRF9QT09MX0lEKTtcbn1cblxuY29uc3QgZXhwb3J0ZWQgPSB7XG4gIHV0aWxzLFxuICByZXF1ZXN0LFxuICByZWdpc3RlcixcbiAgY29uZmlnRGVwcyxcbiAgZ2V0Q29uZmlnRGVwcyxcbiAgcHJld2FybSxcbiAgZ2V0UmVmZXJyZXIsXG4gIHNldFdvcmtlclVybCxcbiAgZ2V0R2xvYmFsV29ya2VyUG9vbCxcbiAgQWN0b3IsXG4gIFdvcmtlclBvb2wsXG4gIERpc3BhdGNoZXIsXG4gIFJlcXVlc3RTY2hlZHVsZXIsXG4gIFRocm90dGxlZEludm9rZXIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBleHBvcnRlZDtcbiJdLCJuYW1lcyI6WyJ1aWQiLCJBY3RvciIsIm51bGxGdW5jdGlvbiIsImFzeW5jQWxsIiwidXRpbHMiLCJyZXF1ZXN0IiwicmVnaXN0ZXIiLCJnZXRSZWZlcnJlciIsIlJlcXVlc3RTY2hlZHVsZXIiLCJUaHJvdHRsZWRJbnZva2VyIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBSSxHQUFBLEVBQUEsQ0FBQTtBQUNELFNBQVMsYUFBYSxHQUFhLEVBQUE7QUFDeEMsRUFBSSxDQUFBLEdBQUEsR0FBQSxDQUFBO0FBQ04sQ0FBQTtBQUVPLFNBQVMsWUFBZSxHQUFBO0FBQzdCLEVBQU8sT0FBQSxDQUFBLENBQUE7QUFDVCxDQUFBO0FBRUEsSUFBSSxPQUFpQixFQUFDLENBQUE7QUFPZixTQUFTLFdBQVcsQ0FBYSxFQUFBO0FBQ3RDLEVBQU8sSUFBQSxHQUFBLENBQUEsQ0FBQTtBQUNULENBQUE7QUFF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QzlCLElBQUEsSUFBSSxLQUFPLEVBQUE7QUFDVCxNQUFNLEtBQUEsQ0FBQSxJQUFBLENBQUssSUFBTSxFQUFBLElBQUEsRUFBTSxFQUFFLENBQUEsQ0FBQTtBQUFBLEtBQzNCO0FBQUEsR0FDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxTQUFTLEVBQW9CLEVBQUE7QUFDM0IsSUFBQSxJQUFJLE9BQU8sS0FBVyxDQUFBLEVBQUE7QUFDcEIsTUFBTSxNQUFBLEtBQUEsR0FBUSxLQUFLLE1BQU8sQ0FBQSxTQUFBLENBQVUsQ0FBQyxDQUFNLEtBQUEsQ0FBQSxDQUFFLE9BQU8sRUFBRSxDQUFBLENBQUE7QUFDdEQsTUFBQSxJQUFJLFFBQVEsQ0FBSSxDQUFBLEVBQUE7QUFDZCxRQUFBLElBQUEsQ0FBSyxZQUFlLEdBQUEsS0FBQSxDQUFBO0FBQUEsT0FDZixNQUFBO0FBQ0wsUUFBQSxJQUFBLENBQUssWUFBZ0IsR0FBQSxDQUFBLElBQUEsQ0FBSyxZQUFlLEdBQUEsQ0FBQSxJQUFLLEtBQUssTUFBTyxDQUFBLE1BQUEsQ0FBQTtBQUFBLE9BQzVEO0FBQUEsS0FDSyxNQUFBO0FBQ0wsTUFBQSxJQUFBLENBQUssWUFBZ0IsR0FBQSxDQUFBLElBQUEsQ0FBSyxZQUFlLEdBQUEsQ0FBQSxJQUFLLEtBQUssTUFBTyxDQUFBLE1BQUEsQ0FBQTtBQUFBLEtBQzVEO0FBQ0EsSUFBTyxPQUFBLElBQUEsQ0FBSyxNQUFPLENBQUEsSUFBQSxDQUFLLFlBQVksQ0FBQSxDQUFBO0FBQUEsR0FDdEM7QUFBQSxFQUVBLE1BQUEsQ0FBTyxVQUFVLElBQU0sRUFBQTtBQUNyQixJQUFLLElBQUEsQ0FBQSxNQUFBLENBQU8sT0FBUSxDQUFBLENBQUMsS0FBVSxLQUFBO0FBQzdCLE1BQUEsS0FBQSxDQUFNLE1BQU8sRUFBQSxDQUFBO0FBQUEsS0FDZCxDQUFBLENBQUE7QUFDRCxJQUFBLElBQUEsQ0FBSyxTQUFTLEVBQUMsQ0FBQTtBQUNmLElBQUksSUFBQSxPQUFBO0FBQVMsTUFBSyxJQUFBLENBQUEsVUFBQSxDQUFXLE9BQVEsQ0FBQSxJQUFBLENBQUssRUFBRSxDQUFBLENBQUE7QUFBQSxHQUM5QztBQUNGOztBQ2xFQSxJQUFJLGdCQUFBLENBQUE7QUFFSixTQUFTLG1CQUFzQixHQUFBO0FBQzdCLEVBQUEsSUFBSSxDQUFDLGdCQUFrQixFQUFBO0FBQ3JCLElBQUEsZ0JBQUEsR0FBbUIsSUFBSSxVQUFXLEVBQUEsQ0FBQTtBQUFBLEdBQ3BDO0FBQ0EsRUFBTyxPQUFBLGdCQUFBLENBQUE7QUFDVCxDQUFBO0FBRUEsU0FBUyxPQUFVLEdBQUE7QUFDakIsRUFBQSxNQUFNLGFBQWEsbUJBQW9CLEVBQUEsQ0FBQTtBQUN2QyxFQUFBLFVBQUEsQ0FBVyxRQUFRLGVBQWUsQ0FBQSxDQUFBO0FBQ3BDLENBQUE7QUFFQSxNQUFNLFFBQVcsR0FBQTtBQUFBLFNBQ2ZDLFdBQUE7QUFBQSxXQUNBQyxnQkFBQTtBQUFBLFlBQ0FDLGNBQUE7QUFBQSxFQUNBLFVBQUE7QUFBQSxFQUNBLGFBQUE7QUFBQSxFQUNBLE9BQUE7QUFBQSxlQUNBQyxpQkFBQTtBQUFBLEVBQ0EsWUFBQTtBQUFBLEVBQ0EsbUJBQUE7QUFBQSxTQUNBTixXQUFBO0FBQUEsRUFDQSxVQUFBO0FBQUEsRUFDQSxVQUFBO0FBQUEsb0JBQ0FPLHNCQUFBO0FBQUEsb0JBQ0FDLHNCQUFBO0FBQ0Y7Ozs7Ozs7OyJ9
